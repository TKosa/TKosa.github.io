(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function Q(){}function St(t){return t()}function st(){return Object.create(null)}function Y(t){t.forEach(St)}function _e(t){return typeof t=="function"}function he(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function qt(t){return Object.keys(t).length===0}function Et(t,...e){if(t==null)return Q;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function z(t){let e;return Et(t,n=>e=n)(),e}function fe(t,e,n){t.$$.on_destroy.push(Et(e,n))}function _(t,e){t.appendChild(e)}function F(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function Dt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function Z(t){return document.createTextNode(t)}function T(){return Z(" ")}function Je(){return Z("")}function A(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Pe(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function zt(t){return Array.from(t.childNodes)}function De(t,e){e=""+e,t.data!==e&&(t.data=e)}function lt(t,e){t.value=e??""}function je(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function R(t,e,n){t.classList[n?"add":"remove"](e)}function Yt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,s,e),l}let Me;function Fe(t){Me=t}function Qe(){if(!Me)throw new Error("Function called outside component initialization");return Me}function Ae(t){Qe().$$.on_mount.push(t)}function Qt(t){Qe().$$.on_destroy.push(t)}function Zt(){const t=Qe();return(e,n,{cancelable:s=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=Yt(e,n,{cancelable:s});return l.slice().forEach(c=>{c.call(t,o)}),!o.defaultPrevented}return!0}}const Ce=[],se=[];let Se=[];const ot=[],It=Promise.resolve();let Xe=!1;function Nt(){Xe||(Xe=!0,It.then(Tt))}function Oe(){return Nt(),It}function qe(t){Se.push(t)}const We=new Set;let ve=0;function Tt(){if(ve!==0)return;const t=Me;do{try{for(;ve<Ce.length;){const e=Ce[ve];ve++,Fe(e),$t(e.$$)}}catch(e){throw Ce.length=0,ve=0,e}for(Fe(null),Ce.length=0,ve=0;se.length;)se.pop()();for(let e=0;e<Se.length;e+=1){const n=Se[e];We.has(n)||(We.add(n),n())}Se.length=0}while(Ce.length);for(;ot.length;)ot.pop()();Xe=!1,We.clear(),Fe(t)}function $t(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qe)}}function xt(t){const e=[],n=[];Se.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),Se=e}const Re=new Set;let me;function Be(){me={r:0,c:[],p:me}}function Ve(){me.r||Y(me.c),me=me.p}function V(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function W(t,e,n,s){if(t&&t.o){if(Re.has(t))return;Re.add(t),me.c.push(()=>{Re.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function ze(t,e){W(t,1,1,()=>{e.delete(t.key)})}function Ye(t,e,n,s,l,o,c,r,h,i,u,d){let f=t.length,p=o.length,m=f;const w={};for(;m--;)w[t[m].key]=m;const b=[],g=new Map,C=new Map,P=[];for(m=p;m--;){const S=d(l,o,m),I=n(S);let M=c.get(I);M?s&&P.push(()=>M.p(S,e)):(M=i(I,S),M.c()),g.set(I,b[m]=M),I in w&&C.set(I,Math.abs(m-w[I]))}const N=new Set,B=new Set;function y(S){V(S,1),S.m(r,u),c.set(S.key,S),u=S.first,p--}for(;f&&p;){const S=b[p-1],I=t[f-1],M=S.key,H=I.key;S===I?(u=S.first,f--,p--):g.has(H)?!c.has(M)||N.has(M)?y(S):B.has(H)?f--:C.get(M)>C.get(H)?(B.add(M),y(S)):(N.add(H),f--):(h(I,c),f--)}for(;f--;){const S=t[f];g.has(S.key)||h(S,c)}for(;p;)y(b[p-1]);return Y(P),b}function oe(t){t&&t.c()}function x(t,e,n,s){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),s||qe(()=>{const c=t.$$.on_mount.map(St).filter(_e);t.$$.on_destroy?t.$$.on_destroy.push(...c):Y(c),t.$$.on_mount=[]}),o.forEach(qe)}function ee(t,e){const n=t.$$;n.fragment!==null&&(xt(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function en(t,e){t.$$.dirty[0]===-1&&(Ce.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ge(t,e,n,s,l,o,c,r=[-1]){const h=Me;Fe(t);const i=t.$$={fragment:null,ctx:[],props:o,update:Q,not_equal:l,bound:st(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:st(),dirty:r,skip_bound:!1,root:e.target||h.$$.root};c&&c(i.root);let u=!1;if(i.ctx=n?n(t,e.props||{},(d,f,...p)=>{const m=p.length?p[0]:f;return i.ctx&&l(i.ctx[d],i.ctx[d]=m)&&(!i.skip_bound&&i.bound[d]&&i.bound[d](m),u&&en(t,d)),f}):[],i.update(),u=!0,Y(i.before_update),i.fragment=s?s(i.ctx):!1,e.target){if(e.hydrate){const d=zt(e.target);i.fragment&&i.fragment.l(d),d.forEach(O)}else i.fragment&&i.fragment.c();e.intro&&V(t.$$.fragment),x(t,e.target,e.anchor,e.customElement),Tt()}Fe(h)}class be{$destroy(){ee(this,1),this.$destroy=Q}$on(e,n){if(!_e(n))return Q;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!qt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ke=[];function tn(t,e){return{subscribe:de(t,e).subscribe}}function de(t,e=Q){let n;const s=new Set;function l(r){if(he(t,r)&&(t=r,n)){const h=!ke.length;for(const i of s)i[1](),ke.push(i,t);if(h){for(let i=0;i<ke.length;i+=2)ke[i][0](ke[i+1]);ke.length=0}}}function o(r){l(r(t))}function c(r,h=Q){const i=[r,h];return s.add(i),s.size===1&&(n=e(l)||Q),r(t),()=>{s.delete(i),s.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:c}}class Ue{constructor(e,n="",s=[]){this.id=e,this.markup=de(n),this.children=de(s)}add(e){z(this.children).includes(e.id)||this.children.set([...z(this.children),e.id])}}const nn={version:2,notes:{0:{id:0,markup:"0",children:[29]},18:{id:18,markup:"For example, these two grandchildren are copied using Ctrl+C. Changing the text or children of one affects both.",children:[19,24]},19:{id:19,markup:"Keep me expanded.",children:[23]},23:{id:23,markup:"Try changing me!",children:[]},24:{id:24,markup:"Keep me expanded.",children:[23]},25:{id:25,markup:"Advanced",children:[26,40,28]},26:{id:26,markup:"Shift+Tab to expand by 3 levels",children:[]},27:{id:27,markup:'"Enter" to make a note editable. "Alt" to return it to normal.',children:[]},28:{id:28,markup:`Ctrl+b to embed copied notes into an editable textbox.
<a id="26" href="#0">It looks like this and can be clicked on</a>`,children:[]},29:{id:29,markup:`Instructions
`,children:[30,35,34,31,41,27,32,25]},30:{id:30,markup:`This is a notepad app. 
`,children:[]},31:{id:31,markup:'Press "Insert" key to add a new note as the child of the focused note.',children:[33]},32:{id:32,markup:`Copy selected notes by reference with Ctrl+C. 
Copy them in "cut" mode with Ctrl+X.
Paste them with Ctrl+V. If in cut mode, removes the original.
`,children:[18]},33:{id:33,markup:'"Ctrl" + "Insert" holds the focus in place.',children:[39]},34:{id:34,markup:"Use the Up and Down arrows to move focus around.You can also use the mouse.",children:[37,38]},35:{id:35,markup:'Press "Tab" to expand or collapse the focused note',children:[36]},36:{id:36,markup:"If a note has a thick toggle arrow, then it has children",children:[]},37:{id:37,markup:"Holding shift will let you reposition siblings",children:[]},38:{id:38,markup:'Try focusing me and pressing "Shift"+Up"',children:[]},39:{id:39,markup:"",children:[]},40:{id:40,markup:"Left to focus parent",children:[]},41:{id:41,markup:'Press "Delete" to delete the focused note',children:[]}}},it=2;class Ie{constructor(){this.notes={0:new Ue(0,"0",[])},this.uID=1,this.version=it}reset(){this.notes={0:new Ue(0,"0",[])},this.uID=1}loadFromJSON(e){let n;for(n in e.notes){var s=e.notes[n],l=new Ue(+n);l.children.set(s.children),l.markup.set(s.markup),this.notes[+n]=l}this.Update()}getCopyForDownload(){let e={version:this.version,notes:{}};return this.copyNotesWithoutOrphans(e.notes),e}copyNotesWithoutOrphans(e){return this.addNoteAndDescendants(this.notes[0],e),e}addNoteAndDescendants(e,n){if(n[e.id])return;n[e.id]={id:e.id,markup:z(e.markup),children:z(e.children)};const s=z(e.markup),l=/<a id="(\d+)">/g;let o;for(;(o=l.exec(s))!==null;){const c=parseInt(o[1]);this.notes[c]&&this.addNoteAndDescendants(this.notes[c],n)}z(e.children).forEach((function(c){this.addNoteAndDescendants(this.notes[c],n)}).bind(this))}getPlainText(){let e={};return this.copyNotesWithoutOrphans(e),this.getNoteInPlainText(e,0,{},"")}getNoteInPlainText(e,n,s,l){if(s[n])return"";s[n]=!0;let o=e[n],c=o.markup,r=o.children;return l+c+`
`+r.map(i=>this.getNoteInPlainText(e,i,s,n==0?l:l+"-")).join(`
`)}addNewChild({parent:e}){var n=this.getNewNote();return e.add(n),n}getNoteByID(e){return this.notes[e]}getNextUID(){for(;this.uID in this.notes;)this.uID++;return this.uID}swapPlaces(e,n,s){for(var l=z(e.children),o=0;o<l.length;o++)if([n.id,s.id].includes(l[o])){[l[o],l[o+1]]=[l[o+1],l[o]];return}}getNewNote(){var e=this.getNextUID(),n=new Ue(e);return this.notes[e]=n,n}getRoot(){var e=this.notes[0];if(!e)throw new Error("no root found");return e}Merge(e,n){var s=e.notes[0],l=0,o=(function(){return l+=1,!(l in this.notes)&&!(l in e.notes)?l:o()}).bind(this);const c=Object.keys(e.notes);for(const i of c){var r=o();e.editNoteId(+i,r)}this.notes={...this.notes,...e.notes};var h=z(this.getRoot().children).length==0;return h?(z(s.children).forEach(i=>{this.getRoot().add(this.notes[i])}),Oe().then(()=>{document.title=n})):(this.getRoot().add(s),s.markup.set(n)),s}editNoteId(e,n){var s=this.notes[e];s.id=n,delete this.notes[e],this.notes[n]=s;var l;for(l in this.notes){var s=this.notes[l];s.children.set(z(s.children).map(c=>c==e?n:c)),s.markup.set(String(z(s.markup)).replace(Ie.GetNoteLinkOpeningTag(e),Ie.GetNoteLinkOpeningTag(n)))}}Update(){for(this.version||(this.version=1);this.version<it;)this.UpgradeByOneVersion()}UpgradeByOneVersion(){switch(this.version){}this.version++}static GetNoteLinkOpeningTag(e){return`<a id="${e}">`}swapNotes(e,n,s){var l=z(e.children).map(function(o){return o==n.id?s.id:o==s.id?n.id:o});e.children.set(l)}}let le=new Ie;const rt=window.localStorage.getItem("visitCount"),ct=rt?parseInt(rt,10):0,At=isNaN(ct)?1:ct+1;window.localStorage.setItem("visitCount",At.toString());At<=5&&le.loadFromJSON(nn);let sn=0;const ln=function(){return sn++},we=de(null),Ke=de(null),ye=de([]),ue={copiedInstances:[],copyMode:"copy"},on={MIN_TEXTBOX_HEIGHT:50,TRUNCATE_NOTES:!1,DISABLE_AUTO_SAVE:!1},Ee=de(on),Ot=tn(/Mac/i.test(navigator.platform));function at(t,e,n){const s=t.slice();return s[2]=e[n],s[56]=e,s[57]=n,s}function ut(t,e,n){const s=t.slice();return s[2]=e[n],s[58]=e,s[57]=n,s}function ft(t,e,n){const s=t.slice();return s[2]=e[n],s[59]=e,s[57]=n,s}function rn(t){let e,n=[],s=new Map,l,o,c,r=t[13];const h=i=>i[2];for(let i=0;i<r.length;i+=1){let u=ft(t,r,i),d=h(u);s.set(d,n[i]=dt(d,u))}return{c(){e=k("div");for(let i=0;i<n.length;i+=1)n[i].c();v(e,"id","notepad"),v(e,"class","svelte-1i9b4oe"),R(e,"isFocused",t[8])},m(i,u){F(i,e,u);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);l=!0,o||(c=A(e,"click",Pe(t[35])),o=!0)},p(i,u){u[0]&6299714&&(r=i[13],Be(),n=Ye(n,u,h,1,i,r,s,e,ze,dt,null,ft),Ve()),(!l||u[0]&256)&&R(e,"isFocused",i[8])},i(i){if(!l){for(let u=0;u<r.length;u+=1)V(n[u]);l=!0}},o(i){for(let u=0;u<n.length;u+=1)W(n[u]);l=!1},d(i){i&&O(e);for(let u=0;u<n.length;u+=1)n[u].d();o=!1,c()}}}function dt(t,e){let n,s,l=e[57],o;const c=()=>e[33](s,l),r=()=>e[33](null,l);let h={noteId:e[2]};return s=new He({props:h}),c(),s.$on("SwapChildren",e[21]),s.$on("DeleteChild",e[22]),s.$on("Focus",e[34]),{key:t,first:null,c(){n=Je(),oe(s.$$.fragment),this.first=n},m(i,u){F(i,n,u),x(s,i,u),o=!0},p(i,u){e=i,l!==e[57]&&(r(),l=e[57],c());const d={};u[0]&8192&&(d.noteId=e[2]),s.$set(d)},i(i){o||(V(s.$$.fragment,i),o=!0)},o(i){W(s.$$.fragment,i),o=!1},d(i){i&&O(n),r(),ee(s,i)}}}function cn(t){let e,n,s,l=t[3]?"v":">",o,c,r,h,i,u,d,f;function p(g,C){return g[10]?un:an}let m=p(t),w=m(t),b=t[4]&&ht(t);return{c(){e=k("div"),n=k("div"),s=k("button"),o=Z(l),c=T(),r=k("span"),w.c(),i=T(),b&&b.c(),v(s,"id","toggleButton"),v(s,"class","svelte-1i9b4oe"),R(s,"boldText",t[13].length>0),v(r,"id","text"),v(r,"class","svelte-1i9b4oe"),R(r,"truncated",t[9]&&!t[3]&&!t[8]&&!t[11]),v(n,"id","topRow"),v(n,"style",h=t[9]?"":"height:100%"),v(n,"class","svelte-1i9b4oe"),v(e,"class","noteContent svelte-1i9b4oe")},m(g,C){F(g,e,C),_(e,n),_(n,s),_(s,o),_(n,c),_(n,r),w.m(r,null),_(e,i),b&&b.m(e,null),u=!0,d||(f=[A(s,"click",Pe(t[36])),A(r,"click",Pe(t[39]))],d=!0)},p(g,C){(!u||C[0]&8)&&l!==(l=g[3]?"v":">")&&De(o,l),(!u||C[0]&8192)&&R(s,"boldText",g[13].length>0),m===(m=p(g))&&w?w.p(g,C):(w.d(1),w=m(g),w&&(w.c(),w.m(r,null))),(!u||C[0]&2824)&&R(r,"truncated",g[9]&&!g[3]&&!g[8]&&!g[11]),(!u||C[0]&512&&h!==(h=g[9]?"":"height:100%"))&&v(n,"style",h),g[4]?b?(b.p(g,C),C[0]&16&&V(b,1)):(b=ht(g),b.c(),V(b,1),b.m(e,null)):b&&(Be(),W(b,1,1,()=>{b=null}),Ve())},i(g){u||(V(b),u=!0)},o(g){W(b),u=!1},d(g){g&&O(e),w.d(),b&&b.d(),d=!1,Y(f)}}}function an(t){let e,n,s;return{c(){e=k("span")},m(l,o){F(l,e,o),e.innerHTML=t[15],n||(s=A(e,"click",t[23]),n=!0)},p(l,o){o[0]&32768&&(e.innerHTML=l[15])},d(l){l&&O(e),n=!1,s()}}}function un(t){let e,n,s;return{c(){e=k("textarea"),v(e,"class","svelte-1i9b4oe")},m(l,o){F(l,e,o),t[37](e),lt(e,t[15]),n||(s=[A(e,"input",t[38]),A(e,"input",t[24])],n=!0)},p(l,o){o[0]&32768&&lt(e,l[15])},d(l){l&&O(e),t[37](null),n=!1,Y(s)}}}function ht(t){let e,n=[],s=new Map,l,o=[],c=new Map,r,h=t[13];const i=f=>f[2];for(let f=0;f<h.length;f+=1){let p=ut(t,h,f),m=i(p);s.set(m,n[f]=pt(m,p))}let u=t[14];const d=f=>f[2];for(let f=0;f<u.length;f+=1){let p=at(t,u,f),m=d(p);c.set(m,o[f]=mt(m,p))}return{c(){e=k("div");for(let f=0;f<n.length;f+=1)n[f].c();l=T();for(let f=0;f<o.length;f+=1)o[f].c();v(e,"id","childContainer"),v(e,"class","svelte-1i9b4oe"),R(e,"hidden",!t[3])},m(f,p){F(f,e,p);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(e,null);_(e,l);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(e,null);r=!0},p(f,p){p[0]&6299714&&(h=f[13],Be(),n=Ye(n,p,i,1,f,h,s,e,ze,pt,l,ut),Ve()),p[0]&4210818&&(u=f[14],Be(),o=Ye(o,p,d,1,f,u,c,e,ze,mt,null,at),Ve()),(!r||p[0]&8)&&R(e,"hidden",!f[3])},i(f){if(!r){for(let p=0;p<h.length;p+=1)V(n[p]);for(let p=0;p<u.length;p+=1)V(o[p]);r=!0}},o(f){for(let p=0;p<n.length;p+=1)W(n[p]);for(let p=0;p<o.length;p+=1)W(o[p]);r=!1},d(f){f&&O(e);for(let p=0;p<n.length;p+=1)n[p].d();for(let p=0;p<o.length;p+=1)o[p].d()}}}function pt(t,e){let n,s,l=e[57],o;const c=()=>e[40](s,l),r=()=>e[40](null,l);let h={noteId:e[2]};return s=new He({props:h}),c(),s.$on("SwapChildren",e[21]),s.$on("DeleteChild",e[22]),s.$on("Focus",e[41]),{key:t,first:null,c(){n=Je(),oe(s.$$.fragment),this.first=n},m(i,u){F(i,n,u),x(s,i,u),o=!0},p(i,u){e=i,l!==e[57]&&(r(),l=e[57],c());const d={};u[0]&8192&&(d.noteId=e[2]),s.$set(d)},i(i){o||(V(s.$$.fragment,i),o=!0)},o(i){W(s.$$.fragment,i),o=!1},d(i){i&&O(n),r(),ee(s,i)}}}function mt(t,e){let n,s,l=e[57],o;const c=()=>e[42](s,l),r=()=>e[42](null,l);let h={noteId:e[2],isReference:!0};return s=new He({props:h}),c(),s.$on("DeleteChild",e[22]),s.$on("Focus",e[43]),{key:t,first:null,c(){n=Je(),oe(s.$$.fragment),this.first=n},m(i,u){F(i,n,u),x(s,i,u),o=!0},p(i,u){e=i,l!==e[57]&&(r(),l=e[57],c());const d={};u[0]&16384&&(d.noteId=e[2]),s.$set(d)},i(i){o||(V(s.$$.fragment,i),o=!0)},o(i){W(s.$$.fragment,i),o=!1},d(i){i&&O(n),r(),ee(s,i)}}}function fn(t){let e,n,s,l=t[18]&&rn(t),o=!t[18]&&cn(t);return{c(){e=k("div"),l&&l.c(),n=T(),o&&o.c(),v(e,"id","note "+t[16].id),v(e,"class","noteWrapper svelte-1i9b4oe"),v(e,"style",t[18]?"height: 100%;":""),R(e,"isSelected",t[11]),R(e,"isExpanded",t[3]),R(e,"isFocused",t[8]),R(e,"referenceContainer",t[0])},m(c,r){F(c,e,r),l&&l.m(e,null),_(e,n),o&&o.m(e,null),s=!0},p(c,r){c[18]&&l.p(c,r),c[18]||o.p(c,r),(!s||r[0]&2048)&&R(e,"isSelected",c[11]),(!s||r[0]&8)&&R(e,"isExpanded",c[3]),(!s||r[0]&256)&&R(e,"isFocused",c[8]),(!s||r[0]&1)&&R(e,"referenceContainer",c[0])},i(c){s||(V(l),V(o),s=!0)},o(c){W(l),W(o),s=!1},d(c){c&&O(e),l&&l.d(),o&&o.d()}}}function _t(t,e){var n=t.selectionStart,s=t.selectionEnd;t.value=t.value.substring(0,n)+e+t.value.substring(s),t.selectionStart=t.selectionEnd=n+e.length}function dn(t){return t.endsWith("*")?t.slice(0,-1):t}function hn(t,e,n){let s,l,o,c,r,h,i,u,d,f;fe(t,ye,a=>n(30,c=a)),fe(t,Ot,a=>n(12,r=a)),fe(t,Ke,a=>n(31,h=a)),fe(t,we,a=>n(32,i=a));const p=Zt(),m=function(){p("DeleteChild",{target:N,isFocused:ce})},w=ln();let{noteId:b}=e,{isReference:g=!1}=e,P=le.notes[b];const N={note:P,noteId:b,instanceId:w,Delete:m};let B,y=[],S=de([]);fe(t,S,a=>n(14,d=a));let I=[];const M=b==0;let H=P.markup;fe(t,H,a=>n(15,f=a));let ie=P.children;fe(t,ie,a=>n(13,u=a));let j=!1;const re=function(){n(3,j=!0)},te=async function(a){if(!(a<=0)){await Oe();var E=[...y,...I];E.forEach(U=>{U.Expand(),U.ExpandAll(a-1)})}};let ce=!1,{Focus:J=function(a=!1){if(i!=N&&Ke.set(null),we.set(N),M){a||ye.set([]);return}else pe(N,a)}}=e;N.Focus=J;let pe=function(a,E){let U=E?[...c,a]:[a];ye.set(U)},ae=function(a){let{child_to_swap:E,moveUp:U}=a.detail;var L=u.indexOf(E),K=L+(U?-1:1),X=K>=0&&K<u.length;if(X){let q=[...u];[q[L],q[K]]=[q[K],q[L]],ie.set(q)}},$=function(a){let{target:E,isFocused:U}=a.detail;if(U){var L=ne();let X=L.indexOf(E);if(X==1)J();else{var K=L[X-1];we.set(K),ye.set([K])}}S.update(X=>X.filter(q=>q!=E.noteId)),ie.set([...u.filter(X=>X!=E.note.id)])};const ne=function(){var a=[N];if(j||M){var E=[...y,...I];E.forEach(U=>{if(U!=null){var L=[];L=U.getSortedGenespan(),a=a.concat(L)}})}return a};Ae(()=>{window.addEventListener("keydown",Te)}),Qt(()=>{window.removeEventListener("keydown",Te)});function Te(a){if(ce){if(a.stopImmediatePropagation(),!s)switch(a.key.toLowerCase()){case"arrowup":a.shiftKey&&p("SwapChildren",{child_to_swap:P.id,moveUp:!0});break;case"arrowdown":a.shiftKey&&p("SwapChildren",{child_to_swap:P.id,moveUp:!1});break;case"arrowleft":p("Focus",{keepSelection:r?a.metaKey:a.ctrlKey});break;case"insert":a.preventDefault();var E=le.addNewChild({parent:P});n(3,j=!0),(r?a.metaKey:a.ctrlKey)||Oe().then(()=>{ne().forEach(L=>{L.note==E&&(we.set(L),ye.set([L]))})});break;case"tab":a.preventDefault(),n(3,j=!j),a.shiftKey&&te(2);break;case"enter":M||(a.preventDefault(),Ke.set(N),Oe().then(()=>{B.focus(),pe(N,!1),$e()}));break;case"i":if(r&&a.ctrlKey){a.preventDefault();var E=le.addNewChild({parent:P});n(3,j=!0),(r?a.metaKey:a.ctrlKey)||Oe().then(()=>{ne().forEach(K=>{K.note==E&&(we.set(K),ye.set([K]))})})}else if(r?a.metaKey:a.ctrlKey)debugger;break;case"d":r&&a.ctrlKey&&(a.preventDefault(),m());break;case"c":(r?a.metaKey:a.ctrlKey)&&(ue.copiedInstances=[...c],ue.copyMode="copy");break;case"x":(r?a.metaKey:a.ctrlKey)&&(ue.copiedInstances=[...c],ue.copyMode="cut");break;case"v":ue.copiedInstances.forEach(function(U){var L=u.includes(U.noteId);L||(P.add(U.note),ue.copyMode=="cut"&&U.Delete())}),u.length>0&&n(3,j=!0);break;case"alt":a.preventDefault();break}if(s)switch(a.key.toLowerCase()){case"enter":break;case"alt":a.preventDefault(),Ke.set(null);break;case"tab":a.preventDefault(),_t(B,"	");break;case"b":(r?a.metaKey:a.ctrlKey)&&ue.copiedInstances.length>0&&(a.preventDefault(),D(B));break}}}function D(a){let E=ue.copiedInstances[0].note,U=a.selectionStart,L=a.selectionEnd,K=a.value.substring(U,L),X=Ie.GetNoteLinkOpeningTag(E.id)+K+"</a>";_t(a,X),H.set(a.value)}function G(a){a.target.tagName==="A"&&(Le(+a.target.id),re())}function Le(a){d.includes(a)||u.includes(a)||S.update(U=>[...U,a])}function $e(){var a=Math.max(z(Ee).MIN_TEXTBOX_HEIGHT,B.scrollHeight)+"px";n(5,B.style.height=a,B)}M&&(Ae(J),window.addEventListener("keydown",function(E){let U=function(L){for(var K=ne(),X,q=0;q<K.length;q++){var jt=K[q];if(jt==i){X=q;break}}var Ge=X+(L?-1:1),Xt=Ge>=0&&Ge<K.length;return Xt?K[Ge]:null};if((E.key=="ArrowUp"||E.key=="ArrowDown")&&h==null&&(E.preventDefault(),!E.shiftKey)){let L=E.key=="ArrowUp",K=U(L);K!=null&&(we.set(K),pe(K,r?E.metaKey:E.ctrlKey))}E.key=="Delete"&&c.forEach(L=>{L.Delete()})}));var xe=function(){document.title.endsWith("*")||(document.title=document.title+"*")};let et=!0;H.subscribe(a=>{if(et){et=!1;return}xe()});let tt=!0;ie.subscribe(a=>{if(tt){tt=!1;return}xe()}),M&&Ae(()=>{document.title=dn(document.title)});let nt;const Mt=Ee.subscribe(a=>{n(9,nt=a.TRUNCATE_NOTES)});Ae(()=>()=>Mt());function Lt(a,E){se[a?"unshift":"push"](()=>{y[E]=a,n(6,y)})}const Ut=a=>{J(a.detail.keepSelection)},Kt=a=>{J(r?a.metaKey:a.ctrlKey)},Rt=()=>{n(3,j=!j)};function Pt(a){se[a?"unshift":"push"](()=>{B=a,n(5,B)})}function Bt(){f=this.value,H.set(f)}const Vt=a=>{J(r?a.metaKey:a.ctrlKey)};function Jt(a,E){se[a?"unshift":"push"](()=>{y[E]=a,n(6,y)})}const Ht=a=>{J(a.detail.keepSelection)};function Gt(a,E){se[a?"unshift":"push"](()=>{I[E]=a,n(7,I)})}const Wt=a=>{J(a.detail.keepSelection)};return t.$$set=a=>{"noteId"in a&&n(2,b=a.noteId),"isReference"in a&&n(0,g=a.isReference),"Focus"in a&&n(1,J=a.Focus)},t.$$.update=()=>{t.$$.dirty[0]&536870912|t.$$.dirty[1]&1&&n(10,s=h==N),t.$$.dirty[0]&24&&n(4,l=j||l),t.$$.dirty[0]&536870912|t.$$.dirty[1]&2&&n(8,ce=i===N),t.$$.dirty[0]&1610612736&&n(11,o=c.includes(N))},[g,J,b,j,l,B,y,I,ce,nt,s,o,r,u,d,f,P,S,M,H,ie,ae,$,G,$e,w,re,te,ne,N,c,h,i,Lt,Ut,Kt,Rt,Pt,Bt,Vt,Jt,Ht,Gt,Wt]}class He extends be{constructor(e){super(),ge(this,e,hn,fn,he,{instanceId:25,noteId:2,isReference:0,Expand:26,ExpandAll:27,Focus:1,getSortedGenespan:28},null,[-1,-1])}get instanceId(){return this.$$.ctx[25]}get Expand(){return this.$$.ctx[26]}get ExpandAll(){return this.$$.ctx[27]}get getSortedGenespan(){return this.$$.ctx[28]}}const Ne="tnpKeys";function Ze(t,e){try{pn(t,e),document.title=t}catch(n){if(n instanceof DOMException&&n.name==="QuotaExceededError")_n()&&Ze(t,e);else throw n}}function pn(t,e){let n=JSON.parse(localStorage.getItem(Ne)??"[]");if(!n.includes(t)){let s=[t,...n];localStorage.setItem(Ne,JSON.stringify(s))}localStorage.setItem(t,e)}function mn(t){let e=JSON.parse(localStorage.getItem(Ne)??"[]");const n=e.indexOf(t);n>-1&&(e.splice(n,1),localStorage.removeItem(t),localStorage.setItem(Ne,JSON.stringify(e)))}function _n(){let t=JSON.parse(localStorage.getItem(Ne)??"[]");if(t.length===0)return!1;const e=t[t.length-1];return t.pop(),localStorage.removeItem(e),localStorage.setItem(Ne,JSON.stringify(t)),!0}function gn(t,e){let n;return function(...l){clearTimeout(n),n=setTimeout(()=>{t.apply(this,l)},e)}}function bn(t){return t.endsWith("*")?t.slice(0,-1):t}function vn(t){let n=!1;return Ae(()=>{const s=Ee.subscribe(c=>{n=c.DISABLE_AUTO_SAVE}),o=gn(()=>{if(n||!document.title.endsWith("*"))return;const c=le.getCopyForDownload(),r=JSON.stringify(c);Ze(bn(document.title),r)},12e4);return document.addEventListener("keydown",o),document.addEventListener("mousedown",o),n||o(),()=>{document.removeEventListener("keydown",o),document.removeEventListener("mousedown",o),s()}}),[]}class kn extends be{constructor(e){super(),ge(this,e,vn,null,he,{})}}function gt(t,e,n){const s=t.slice();return s[7]=e[n][0],s[8]=e[n][1],s}function bt(t){let e,n,s=t[7]+"",l,o,c,r=t[8]+"",h,i;return{c(){e=k("tr"),n=k("td"),l=Z(s),o=T(),c=k("td"),h=Z(r),i=T(),v(n,"class","svelte-3kxyx8"),v(c,"class","svelte-3kxyx8")},m(u,d){F(u,e,d),_(e,n),_(n,l),_(e,o),_(e,c),_(c,h),_(e,i)},p(u,d){d&4&&s!==(s=u[7]+"")&&De(l,s),d&4&&r!==(r=u[8]+"")&&De(h,r)},d(u){u&&O(e)}}}function wn(t){let e,n=t[0]?"X":"?",s,l,o,c,r,h,i,u,d,f,p,m=[["Insert","Add a new note under the focused one"],["Delete","Delete selected notes"],...t[2]?[["Ctrl+I","Add a new note under the focused one"],["Ctrl+D","Delete selected notes"]]:[],["Up/Down Arrow","Move focus up/down"],["Enter","Make a note editable"],["Alt","Return an editable note to being uneditable"],["Shift+Up/Down","Swap Adjacent Siblings"],["Click on note","Focuses note"],[(t[2]?"Cmd":"Ctrl")+"+Focus Note","Keeps notes selected while focusing new one"],[(t[2]?"Cmd":"Ctrl")+"+C/X/V","Copy/Cut/Paste selected notes"],[(t[2]?"Cmd":"Ctrl")+"+B","Paste a reference of the copied note into the text box"],["Tab","Toggles whether focused note is expanded"],["Tab+Shift","Also expands children and grandchildren"]],w=[];for(let b=0;b<m.length;b+=1)w[b]=bt(gt(t,m,b));return{c(){e=k("button"),s=Z(n),l=T(),o=k("div"),c=k("div"),c.innerHTML="<h2>Controls</h2>",r=T(),h=k("table"),i=k("thead"),i.innerHTML=`<tr><th class="svelte-3kxyx8">Command</th> 
        <th class="svelte-3kxyx8">Description</th></tr>`,u=T(),d=k("tbody");for(let b=0;b<w.length;b+=1)w[b].c();v(c,"class","title svelte-3kxyx8"),v(h,"class","svelte-3kxyx8"),v(o,"class","menu svelte-3kxyx8"),je(o,"display",t[0]?"block":"none")},m(b,g){F(b,e,g),_(e,s),F(b,l,g),F(b,o,g),_(o,c),_(o,r),_(o,h),_(h,i),_(h,u),_(h,d);for(let C=0;C<w.length;C+=1)w[C]&&w[C].m(d,null);t[4](o),f||(p=A(e,"click",Pe(t[3])),f=!0)},p(b,[g]){if(g&1&&n!==(n=b[0]?"X":"?")&&De(s,n),g&4){m=[["Insert","Add a new note under the focused one"],["Delete","Delete selected notes"],...b[2]?[["Ctrl+I","Add a new note under the focused one"],["Ctrl+D","Delete selected notes"]]:[],["Up/Down Arrow","Move focus up/down"],["Enter","Make a note editable"],["Alt","Return an editable note to being uneditable"],["Shift+Up/Down","Swap Adjacent Siblings"],["Click on note","Focuses note"],[(b[2]?"Cmd":"Ctrl")+"+Focus Note","Keeps notes selected while focusing new one"],[(b[2]?"Cmd":"Ctrl")+"+C/X/V","Copy/Cut/Paste selected notes"],[(b[2]?"Cmd":"Ctrl")+"+B","Paste a reference of the copied note into the text box"],["Tab","Toggles whether focused note is expanded"],["Tab+Shift","Also expands children and grandchildren"]];let C;for(C=0;C<m.length;C+=1){const P=gt(b,m,C);w[C]?w[C].p(P,g):(w[C]=bt(P),w[C].c(),w[C].m(d,null))}for(;C<w.length;C+=1)w[C].d(1);w.length=m.length}g&1&&je(o,"display",b[0]?"block":"none")},i:Q,o:Q,d(b){b&&O(e),b&&O(l),b&&O(o),Dt(w,b),t[4](null),f=!1,p()}}}function yn(t,e,n){let s;fe(t,Ot,h=>n(2,s=h));let l=!1,o;function c(){n(0,l=!l)}function r(h){se[h?"unshift":"push"](()=>{o=h,n(1,o)})}return[l,o,s,c,r]}class Cn extends be{constructor(e){super(),ge(this,e,yn,wn,he,{})}}function vt(t){let e,n,s,l,o,c,r,h,i,u;return{c(){e=k("div"),n=k("div"),s=k("p"),l=Z(t[0]),o=T(),c=k("button"),c.textContent="Yes",r=T(),h=k("button"),h.textContent="No",v(c,"class","svelte-v3dq6t"),v(h,"class","svelte-v3dq6t"),v(n,"class","modal-content svelte-v3dq6t"),v(e,"class","modal svelte-v3dq6t")},m(d,f){F(d,e,f),_(e,n),_(n,s),_(s,l),_(n,o),_(n,c),_(n,r),_(n,h),i||(u=[A(c,"click",function(){_e(t[1])&&t[1].apply(this,arguments)}),A(h,"click",function(){_e(t[2])&&t[2].apply(this,arguments)})],i=!0)},p(d,f){t=d,f&1&&De(l,t[0])},d(d){d&&O(e),i=!1,Y(u)}}}function Sn(t){let e,n=t[3]&&vt(t);return{c(){n&&n.c(),e=Je()},m(s,l){n&&n.m(s,l),F(s,e,l)},p(s,[l]){s[3]?n?n.p(s,l):(n=vt(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Q,o:Q,d(s){n&&n.d(s),s&&O(e)}}}function En(t,e,n){let{message:s}=e,{onConfirm:l}=e,{onCancel:o}=e,{visible:c}=e;return t.$$set=r=>{"message"in r&&n(0,s=r.message),"onConfirm"in r&&n(1,l=r.onConfirm),"onCancel"in r&&n(2,o=r.onCancel),"visible"in r&&n(3,c=r.visible)},[s,l,o,c]}class Dn extends be{constructor(e){super(),ge(this,e,En,Sn,he,{message:0,onConfirm:1,onCancel:2,visible:3})}}function kt(t,e,n){const s=t.slice();return s[14]=e[n],s}function wt(t){let e,n,s,l,o,c,r,h,i,u=t[2],d=[];for(let f=0;f<u.length;f+=1)d[f]=yt(kt(t,u,f));return{c(){e=k("div"),n=k("div"),s=k("table"),l=k("tr"),o=k("td"),c=k("button"),c.textContent="Ã—",r=T();for(let f=0;f<d.length;f+=1)d[f].c();v(c,"class","close-button svelte-9sk29o"),v(o,"colspan","2"),v(o,"class","svelte-9sk29o"),v(l,"class","header-row svelte-9sk29o"),v(s,"class","svelte-9sk29o"),v(n,"class","modal-content svelte-9sk29o"),v(e,"class","modal svelte-9sk29o")},m(f,p){F(f,e,p),_(e,n),_(n,s),_(s,l),_(l,o),_(o,c),_(s,r);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(s,null);h||(i=[A(c,"click",function(){_e(t[1])&&t[1].apply(this,arguments)}),A(c,"keypress",function(){_e(t[1])&&t[1].apply(this,arguments)})],h=!0)},p(f,p){if(t=f,p&102){u=t[2];let m;for(m=0;m<u.length;m+=1){const w=kt(t,u,m);d[m]?d[m].p(w,p):(d[m]=yt(w),d[m].c(),d[m].m(s,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=u.length}},d(f){f&&O(e),Dt(d,f),h=!1,Y(i)}}}function yt(t){let e,n,s,l=t[14]+"",o,c,r,h,i,u;function d(){return t[10](t[14])}function f(){return t[11](t[14])}function p(){return t[12](t[14])}return{c(){e=k("tr"),n=k("td"),s=k("button"),o=Z(l),c=T(),r=k("td"),r.textContent="x",h=T(),v(s,"class","filename-button svelte-9sk29o"),v(n,"class","filename svelte-9sk29o"),v(r,"class","delete-button svelte-9sk29o"),v(e,"class","svelte-9sk29o")},m(m,w){F(m,e,w),_(e,n),_(n,s),_(s,o),_(e,c),_(e,r),_(e,h),i||(u=[A(s,"click",d),A(r,"click",f),A(r,"keypress",p)],i=!0)},p(m,w){t=m,w&4&&l!==(l=t[14]+"")&&De(o,l)},d(m){m&&O(e),i=!1,Y(u)}}}function In(t){let e,n,s,l=t[0]&&wt(t);return n=new Dn({props:{message:`Are you sure you want to delete ${t[4]}?`,onConfirm:t[7],onCancel:t[8],visible:t[3]}}),{c(){l&&l.c(),e=T(),oe(n.$$.fragment)},m(o,c){l&&l.m(o,c),F(o,e,c),x(n,o,c),s=!0},p(o,[c]){o[0]?l?l.p(o,c):(l=wt(o),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null);const r={};c&16&&(r.message=`Are you sure you want to delete ${o[4]}?`),c&8&&(r.visible=o[3]),n.$set(r)},i(o){s||(V(n.$$.fragment,o),s=!0)},o(o){W(n.$$.fragment,o),s=!1},d(o){l&&l.d(o),o&&O(e),ee(n,o)}}}function Nn(t,e,n){let{visible:s=!1}=e,{toggleModal:l}=e,{merge_tnp_file:o}=e,c=[],r=!1,h="";function i(){n(2,c=JSON.parse(localStorage.getItem("tnpKeys"))??[])}function u(g){const C=localStorage.getItem(g);o(C,g)}function d(g){n(4,h=g),n(3,r=!0)}function f(){mn(h),i(),n(3,r=!1)}function p(){n(3,r=!1)}const m=g=>{u(g),l()},w=g=>d(g),b=g=>d(g);return t.$$set=g=>{"visible"in g&&n(0,s=g.visible),"toggleModal"in g&&n(1,l=g.toggleModal),"merge_tnp_file"in g&&n(9,o=g.merge_tnp_file)},t.$$.update=()=>{t.$$.dirty&1&&s&&i()},[s,l,c,r,h,u,d,f,p,o,m,w,b]}class Tn extends be{constructor(e){super(),ge(this,e,Nn,In,he,{visible:0,toggleModal:1,merge_tnp_file:9})}}function An(t){let e,n,s,l,o,c,r,h,i,u,d,f,p,m,w,b,g,C,P,N,B,y,S,I,M,H,ie,j,re,te,ce,J,pe,ae,$,ne,Te;return te=new Cn({}),J=new Tn({props:{visible:t[2],toggleModal:t[10],merge_tnp_file:t[7]}}),ae=new kn({}),{c(){e=k("div"),n=k("button"),n.textContent="File",s=T(),l=k("div"),o=k("button"),o.textContent="Download to Computer",c=T(),r=k("button"),h=Z(`Upload from Computer\r
        `),i=k("input"),u=T(),d=k("button"),d.textContent="Save in browser",f=T(),p=k("button"),p.textContent="Load from browser",m=T(),w=k("button"),w.textContent="Save as text",b=T(),g=k("div"),C=k("button"),C.textContent="Settings",P=T(),N=k("div"),B=k("label"),y=k("input"),S=Z(`\r
        Truncate notes`),I=T(),M=k("label"),H=k("input"),ie=Z(`\r
        Disable Auto-save`),j=T(),re=k("div"),oe(te.$$.fragment),ce=T(),oe(J.$$.fragment),pe=T(),oe(ae.$$.fragment),v(n,"class","dropdown-button svelte-ptc0mw"),v(o,"class","svelte-ptc0mw"),v(i,"id","fileInput"),v(i,"type","file"),v(i,"accept",".tnp"),je(i,"display","none"),v(r,"class","svelte-ptc0mw"),v(d,"class","svelte-ptc0mw"),v(p,"class","svelte-ptc0mw"),v(w,"class","svelte-ptc0mw"),v(l,"id","FileDropdown"),v(l,"class","dropdown-content svelte-ptc0mw"),R(l,"hidden",!t[3]),v(e,"class","dropdown svelte-ptc0mw"),v(C,"class","dropdown-button svelte-ptc0mw"),v(y,"type","checkbox"),y.checked=t[5],v(B,"class","svelte-ptc0mw"),v(H,"type","checkbox"),H.checked=t[6],v(M,"class","svelte-ptc0mw"),v(N,"id","SettingsDropdown"),v(N,"class","dropdown-content svelte-ptc0mw"),R(N,"hidden",!t[4]),v(g,"class","dropdown svelte-ptc0mw"),v(re,"class","menu-right svelte-ptc0mw")},m(D,G){F(D,e,G),_(e,n),_(e,s),_(e,l),_(l,o),_(l,c),_(l,r),_(r,h),_(r,i),t[17](i),_(l,u),_(l,d),_(l,f),_(l,p),_(l,m),_(l,w),F(D,b,G),F(D,g,G),_(g,C),_(g,P),_(g,N),_(N,B),_(B,y),_(B,S),_(N,I),_(N,M),_(M,H),_(M,ie),F(D,j,G),F(D,re,G),x(te,re,null),F(D,ce,G),x(J,D,G),F(D,pe,G),x(ae,D,G),$=!0,ne||(Te=[A(n,"click",t[12]),A(o,"click",function(){_e(t[0])&&t[0].apply(this,arguments)}),A(i,"change",t[8]),A(r,"click",t[18]),A(d,"click",t[9]),A(p,"click",t[10]),A(w,"click",t[15]),A(C,"click",t[11]),A(y,"change",t[13]),A(H,"change",t[14])],ne=!0)},p(D,[G]){t=D,(!$||G&8)&&R(l,"hidden",!t[3]),(!$||G&32)&&(y.checked=t[5]),(!$||G&64)&&(H.checked=t[6]),(!$||G&16)&&R(N,"hidden",!t[4]);const Le={};G&4&&(Le.visible=t[2]),J.$set(Le)},i(D){$||(V(te.$$.fragment,D),V(J.$$.fragment,D),V(ae.$$.fragment,D),$=!0)},o(D){W(te.$$.fragment,D),W(J.$$.fragment,D),W(ae.$$.fragment,D),$=!1},d(D){D&&O(e),t[17](null),D&&O(b),D&&O(g),D&&O(j),D&&O(re),ee(te),D&&O(ce),ee(J,D),D&&O(pe),ee(ae,D),ne=!1,Y(Te)}}}function On(t){return t.slice(0,-4)}function Fn(){document.title=Ft(document.title)}function Ft(t){return t.endsWith("*")?t.slice(0,-1):t}function Mn(t){var e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(t)),e.setAttribute("download",document.title+".tnp"),e.click()}function Ct(t,e){const n=s=>{!s.target.closest("#"+t)&&(e(),document.removeEventListener("mousedown",n))};setTimeout(()=>{document.addEventListener("mousedown",n)},0)}function Ln(t,e,n){let s;function l(y,S){let I=new Ie,M=JSON.parse(y);I.loadFromJSON(M),le.Merge(I,S)}let o=async function(){let y=Array.from(s.files);for(var S=0;S<y.length;S++){var I=y[S];await c(I)}n(1,s.value="",s)};async function c(y){if(y.name.endsWith(".tnp")){var S=await y.text();l(S,On(y.name))}}let{download:r=function(){var y=le.getCopyForDownload(),S=JSON.stringify(y),I=new Blob([S],{type:"application/octet-binary"});Mn(I),Fn()}}=e;function h(){let y=prompt("Enter filename:",Ft(document.title));if(y!==null&&y!==""){let S=le.getCopyForDownload(),I=JSON.stringify(S);Ze(y,I)}}let i=!1;function u(){n(2,i=!i)}let d=!1,f=!1;function p(){n(4,f=!f),n(3,d=!1),f&&Ct("SettingsDropdown",()=>{n(4,f=!1)})}function m(){n(3,d=!d),d&&Ct("FileDropdown",()=>{n(3,d=!1)})}let w,b;Ee.subscribe(y=>{n(5,w=y.TRUNCATE_NOTES),n(6,b=y.DISABLE_AUTO_SAVE)});function g(){Ee.update(y=>({...y,TRUNCATE_NOTES:!y.TRUNCATE_NOTES}))}function C(){Ee.update(y=>({...y,DISABLE_AUTO_SAVE:!y.DISABLE_AUTO_SAVE}))}function P(){let y=le.getPlainText();console.log(y)}function N(y){se[y?"unshift":"push"](()=>{s=y,n(1,s)})}const B=()=>s.click();return t.$$set=y=>{"download"in y&&n(0,r=y.download)},[r,s,i,d,f,w,b,l,o,h,u,p,m,g,C,P,c,N,B]}class Un extends be{constructor(e){super(),ge(this,e,Ln,An,he,{uploadOneFile:16,download:0})}get uploadOneFile(){return this.$$.ctx[16]}}function Kn(t){let e,n,s,l,o,c,r,h,i,u,d={};return l=new Un({props:d}),t[5](l),r=new He({props:{noteId:0}}),{c(){e=k("main"),n=k("div"),s=k("span"),oe(l.$$.fragment),o=T(),c=k("div"),oe(r.$$.fragment),v(s,"id","Menubar"),v(s,"class","svelte-1kacpug"),v(n,"id","Topbar"),v(n,"class","svelte-1kacpug"),v(c,"class","notepad svelte-1kacpug"),v(e,"class","svelte-1kacpug"),R(e,"dragging",t[1])},m(f,p){F(f,e,p),_(e,n),_(n,s),x(l,s,null),_(e,o),_(e,c),x(r,c,null),h=!0,i||(u=[A(e,"dragover",t[2]),A(e,"dragleave",t[3]),A(e,"drop",t[4])],i=!0)},p(f,[p]){const m={};l.$set(m),(!h||p&2)&&R(e,"dragging",f[1])},i(f){h||(V(l.$$.fragment,f),V(r.$$.fragment,f),h=!0)},o(f){W(l.$$.fragment,f),W(r.$$.fragment,f),h=!1},d(f){f&&O(e),t[5](null),ee(l),ee(r),i=!1,Y(u)}}}function Rn(t,e,n){let s,l=!1;function o(i){i.preventDefault(),n(1,l=!0)}function c(){n(1,l=!1)}function r(i){var u;if(i.preventDefault(),n(1,l=!1),(u=i.dataTransfer)!=null&&u.files.length){const d=i.dataTransfer.files[0];s.uploadOneFile(d)}}function h(i){se[i?"unshift":"push"](()=>{s=i,n(0,s)})}return[s,l,o,c,r,h]}class Pn extends be{constructor(e){super(),ge(this,e,Rn,Kn,he,{})}}new Pn({target:document.getElementById("app")});
