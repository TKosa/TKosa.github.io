(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function Q(){}function wt(t){return t()}function nt(){return Object.create(null)}function Y(t){t.forEach(wt)}function fe(t){return typeof t=="function"}function ae(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gt(t){return Object.keys(t).length===0}function yt(t,...e){if(t==null)return Q;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function z(t){let e;return yt(t,n=>e=n)(),e}function ge(t,e,n){t.$$.on_destroy.push(yt(e,n))}function m(t,e){t.appendChild(e)}function O(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function St(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function ee(t){return document.createTextNode(t)}function N(){return ee(" ")}function Ve(){return ee("")}function T(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Pe(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Wt(t){return Array.from(t.childNodes)}function Je(t,e){e=""+e,t.data!==e&&(t.data=e)}function st(t,e){t.value=e??""}function je(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function U(t,e,n){t.classList[n?"add":"remove"](e)}function jt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,s,e),l}let Oe;function Ae(t){Oe=t}function Qe(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function Te(t){Qe().$$.on_mount.push(t)}function Xt(t){Qe().$$.on_destroy.push(t)}function qt(){const t=Qe();return(e,n,{cancelable:s=!1}={})=>{const l=t.$$.callbacks[e];if(l){const i=jt(e,n,{cancelable:s});return l.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const ke=[],se=[];let we=[];const lt=[],Ct=Promise.resolve();let Xe=!1;function Et(){Xe||(Xe=!0,Ct.then(It))}function Ue(){return Et(),Ct}function qe(t){we.push(t)}const We=new Set;let be=0;function It(){if(be!==0)return;const t=Oe;do{try{for(;be<ke.length;){const e=ke[be];be++,Ae(e),zt(e.$$)}}catch(e){throw ke.length=0,be=0,e}for(Ae(null),ke.length=0,be=0;se.length;)se.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];We.has(n)||(We.add(n),n())}we.length=0}while(ke.length);for(;lt.length;)lt.pop()();Xe=!1,We.clear(),Ae(t)}function zt(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qe)}}function Yt(t){const e=[],n=[];we.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),we=e}const Re=new Set;let ue;function Ke(){ue={r:0,c:[],p:ue}}function Be(){ue.r||Y(ue.c),ue=ue.p}function K(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function H(t,e,n,s){if(t&&t.o){if(Re.has(t))return;Re.add(t),ue.c.push(()=>{Re.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function ze(t,e){H(t,1,1,()=>{e.delete(t.key)})}function Ye(t,e,n,s,l,i,r,c,h,o,f,d){let a=t.length,p=i.length,_=a;const y={};for(;_--;)y[t[_].key]=_;const v=[],b=new Map,C=new Map,P=[];for(_=p;_--;){const S=d(l,i,_),D=n(S);let L=r.get(D);L?s&&P.push(()=>L.p(S,e)):(L=o(D,S),L.c()),b.set(D,v[_]=L),D in y&&C.set(D,Math.abs(_-y[D]))}const F=new Set,B=new Set;function w(S){K(S,1),S.m(c,f),r.set(S.key,S),f=S.first,p--}for(;a&&p;){const S=v[p-1],D=t[a-1],L=S.key,V=D.key;S===D?(f=S.first,a--,p--):b.has(V)?!r.has(L)||F.has(L)?w(S):B.has(V)?a--:C.get(L)>C.get(V)?(B.add(L),w(S)):(F.add(V),a--):(h(D,r),a--)}for(;a--;){const S=t[a];b.has(S.key)||h(S,r)}for(;p;)w(v[p-1]);return Y(P),v}function le(t){t&&t.c()}function te(t,e,n,s){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),s||qe(()=>{const r=t.$$.on_mount.map(wt).filter(fe);t.$$.on_destroy?t.$$.on_destroy.push(...r):Y(r),t.$$.on_mount=[]}),i.forEach(qe)}function ne(t,e){const n=t.$$;n.fragment!==null&&(Yt(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Qt(t,e){t.$$.dirty[0]===-1&&(ke.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function he(t,e,n,s,l,i,r,c=[-1]){const h=Oe;Ae(t);const o=t.$$={fragment:null,ctx:[],props:i,update:Q,not_equal:l,bound:nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:nt(),dirty:c,skip_bound:!1,root:e.target||h.$$.root};r&&r(o.root);let f=!1;if(o.ctx=n?n(t,e.props||{},(d,a,...p)=>{const _=p.length?p[0]:a;return o.ctx&&l(o.ctx[d],o.ctx[d]=_)&&(!o.skip_bound&&o.bound[d]&&o.bound[d](_),f&&Qt(t,d)),a}):[],o.update(),f=!0,Y(o.before_update),o.fragment=s?s(o.ctx):!1,e.target){if(e.hydrate){const d=Wt(e.target);o.fragment&&o.fragment.l(d),d.forEach(A)}else o.fragment&&o.fragment.c();e.intro&&K(t.$$.fragment),te(t,e.target,e.anchor,e.customElement),It()}Ae(h)}class pe{$destroy(){ne(this,1),this.$destroy=Q}$on(e,n){if(!fe(n))return Q;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ve=[];function de(t,e=Q){let n;const s=new Set;function l(c){if(ae(t,c)&&(t=c,n)){const h=!ve.length;for(const o of s)o[1](),ve.push(o,t);if(h){for(let o=0;o<ve.length;o+=2)ve[o][0](ve[o+1]);ve.length=0}}}function i(c){l(c(t))}function r(c,h=Q){const o=[c,h];return s.add(o),s.size===1&&(n=e(l)||Q),c(t),()=>{s.delete(o),s.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:r}}class Le{constructor(e,n="",s=[]){this.id=e,this.markup=de(n),this.children=de(s)}add(e){z(this.children).includes(e.id)||this.children.set([...z(this.children),e.id])}}const Zt={version:2,notes:{0:{id:0,markup:"0",children:[29]},18:{id:18,markup:"For example, these two grandchildren are copied using Ctrl+C. Changing the text or children of one affects both.",children:[19,24]},19:{id:19,markup:"Keep me expanded.",children:[23]},23:{id:23,markup:"Try changing me!",children:[]},24:{id:24,markup:"Keep me expanded.",children:[23]},25:{id:25,markup:"Advanced",children:[26,40,28]},26:{id:26,markup:"Shift+Tab to expand by 3 levels",children:[]},27:{id:27,markup:'"Enter" to make a note editable. "Alt" to return it to normal.',children:[]},28:{id:28,markup:`Ctrl+b to embed copied notes into an editable textbox.
<a id="26" href="#0">It looks like this and can be clicked on</a>`,children:[]},29:{id:29,markup:`Instructions
`,children:[30,35,34,31,41,27,32,25]},30:{id:30,markup:`This is a notepad app. 
`,children:[]},31:{id:31,markup:'Press "Insert" key to add a new note as the child of the focused note.',children:[33]},32:{id:32,markup:`Copy selected notes by reference with Ctrl+C. 
Copy them in "cut" mode with Ctrl+X.
Paste them with Ctrl+V. If in cut mode, removes the original.
`,children:[18]},33:{id:33,markup:'"Ctrl" + "Insert" holds the focus in place.',children:[39]},34:{id:34,markup:"Use the Up and Down arrows to move focus around.You can also use the mouse.",children:[37,38]},35:{id:35,markup:'Press "Tab" to expand or collapse the focused note',children:[36]},36:{id:36,markup:"If a note has a thick toggle arrow, then it has children",children:[]},37:{id:37,markup:"Holding shift will let you reposition siblings",children:[]},38:{id:38,markup:'Try focusing me and pressing "Shift"+Up"',children:[]},39:{id:39,markup:"",children:[]},40:{id:40,markup:"Left to focus parent",children:[]},41:{id:41,markup:'Press "Delete" to delete the focused note',children:[]}}},it=2;class Se{constructor(){this.notes={0:new Le(0,"0",[])},this.uID=1,this.version=it}reset(){this.notes={0:new Le(0,"0",[])},this.uID=1}loadFromJSON(e){let n;for(n in e.notes){var s=e.notes[n],l=new Le(+n);l.children.set(s.children),l.markup.set(s.markup),this.notes[+n]=l}this.Update()}getCopyForDownload(){let e={version:this.version,notes:{}};return this.copyNotesWithoutOrphans(e.notes),e}copyNotesWithoutOrphans(e){return this.addNoteAndDescendants(this.notes[0],e),e}addNoteAndDescendants(e,n){if(n[e.id])return;n[e.id]={id:e.id,markup:z(e.markup),children:z(e.children)};const s=z(e.markup),l=/<a id="(\d+)" href="#0">/g;let i;for(;(i=l.exec(s))!==null;){const r=parseInt(i[1]);this.notes[r]&&this.addNoteAndDescendants(this.notes[r],n)}z(e.children).forEach((function(r){this.addNoteAndDescendants(this.notes[r],n)}).bind(this))}getPlainText(){let e={};return this.copyNotesWithoutOrphans(e),this.getNoteInPlainText(e,0,{},"")}getNoteInPlainText(e,n,s,l){if(s[n])return"";s[n]=!0;let i=e[n],r=i.markup,c=i.children;return l+r+`
`+c.map(o=>this.getNoteInPlainText(e,o,s,n==0?l:l+"-")).join(`
`)}addNewChild({parent:e}){var n=this.getNewNote();return e.add(n),n}getNoteByID(e){return this.notes[e]}getNextUID(){for(;this.uID in this.notes;)this.uID++;return this.uID}swapPlaces(e,n,s){for(var l=z(e.children),i=0;i<l.length;i++)if([n.id,s.id].includes(l[i])){[l[i],l[i+1]]=[l[i+1],l[i]];return}}getNewNote(){var e=this.getNextUID(),n=new Le(e);return this.notes[e]=n,n}getRoot(){var e=this.notes[0];if(!e)throw new Error("no root found");return e}Merge(e,n){var s=e.notes[0],l=0,i=(function(){return l+=1,!(l in this.notes)&&!(l in e.notes)?l:i()}).bind(this);const r=Object.keys(e.notes);for(const o of r){var c=i();e.editNoteId(+o,c)}this.notes={...this.notes,...e.notes};var h=z(this.getRoot().children).length==0;return h?(z(s.children).forEach(o=>{this.getRoot().add(this.notes[o])}),Ue().then(()=>{document.title=n})):(this.getRoot().add(s),s.markup.set(n)),s}editNoteId(e,n){var s=this.notes[e];s.id=n,delete this.notes[e],this.notes[n]=s;var l;for(l in this.notes){var s=this.notes[l];s.children.set(z(s.children).map(r=>r==e?n:r)),s.markup.set(String(z(s.markup)).replace(Se.GetNoteLinkOpeningTag(e),Se.GetNoteLinkOpeningTag(n)))}}Update(){for(this.version||(this.version=1);this.version<it;)this.UpgradeByOneVersion()}UpgradeByOneVersion(){switch(this.version){}this.version++}static GetNoteLinkOpeningTag(e){return`<a id="${e}" href="#0">`}swapNotes(e,n,s){var l=z(e.children).map(function(i){return i==n.id?s.id:i==s.id?n.id:i});e.children.set(l)}}let ce=new Se;const ot=window.localStorage.getItem("visitCount"),rt=ot?parseInt(ot,10):0,Dt=isNaN(rt)?1:rt+1;window.localStorage.setItem("visitCount",Dt.toString());Dt<=5&&ce.loadFromJSON(Zt);let $t=0;const xt=function(){return $t++},De=de(null),Me=de(null),Ne=de([]),re={copiedInstances:[],copyMode:"copy"},en={MIN_TEXTBOX_HEIGHT:50,TRUNCATE_NOTES:!1,DISABLE_AUTO_SAVE:!1},ye=de(en);function ct(t,e,n){const s=t.slice();return s[2]=e[n],s[55]=e,s[56]=n,s}function at(t,e,n){const s=t.slice();return s[2]=e[n],s[57]=e,s[56]=n,s}function ut(t,e,n){const s=t.slice();return s[2]=e[n],s[58]=e,s[56]=n,s}function tn(t){let e,n=[],s=new Map,l,i,r,c=t[12];const h=o=>o[2];for(let o=0;o<c.length;o+=1){let f=ut(t,c,o),d=h(f);s.set(d,n[o]=ft(d,f))}return{c(){e=k("div");for(let o=0;o<n.length;o+=1)n[o].c();g(e,"id","notepad"),g(e,"class","svelte-1i9b4oe"),U(e,"isFocused",t[8])},m(o,f){O(o,e,f);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);l=!0,i||(r=T(e,"click",Pe(t[34])),i=!0)},p(o,f){f[0]&3149890&&(c=o[12],Ke(),n=Ye(n,f,h,1,o,c,s,e,ze,ft,null,ut),Be()),(!l||f[0]&256)&&U(e,"isFocused",o[8])},i(o){if(!l){for(let f=0;f<c.length;f+=1)K(n[f]);l=!0}},o(o){for(let f=0;f<n.length;f+=1)H(n[f]);l=!1},d(o){o&&A(e);for(let f=0;f<n.length;f+=1)n[f].d();i=!1,r()}}}function ft(t,e){let n,s,l=e[56],i;const r=()=>e[32](s,l),c=()=>e[32](null,l);let h={noteId:e[2]};return s=new He({props:h}),r(),s.$on("SwapChildren",e[20]),s.$on("DeleteChild",e[21]),s.$on("Focus",e[33]),{key:t,first:null,c(){n=Ve(),le(s.$$.fragment),this.first=n},m(o,f){O(o,n,f),te(s,o,f),i=!0},p(o,f){e=o,l!==e[56]&&(c(),l=e[56],r());const d={};f[0]&4096&&(d.noteId=e[2]),s.$set(d)},i(o){i||(K(s.$$.fragment,o),i=!0)},o(o){H(s.$$.fragment,o),i=!1},d(o){o&&A(n),c(),ne(s,o)}}}function nn(t){let e,n,s,l=t[3]?"v":">",i,r,c,h,o,f,d,a;function p(b,C){return b[10]?ln:sn}let _=p(t),y=_(t),v=t[4]&&dt(t);return{c(){e=k("div"),n=k("div"),s=k("button"),i=ee(l),r=N(),c=k("span"),y.c(),o=N(),v&&v.c(),g(s,"id","toggleButton"),g(s,"class","svelte-1i9b4oe"),U(s,"boldText",t[12].length>0),g(c,"id","text"),g(c,"class","svelte-1i9b4oe"),U(c,"truncated",t[9]&&!t[3]&&!t[8]&&!t[11]),g(n,"id","topRow"),g(n,"style",h=t[9]?"":"height:100%"),g(n,"class","svelte-1i9b4oe"),g(e,"class","noteContent svelte-1i9b4oe")},m(b,C){O(b,e,C),m(e,n),m(n,s),m(s,i),m(n,r),m(n,c),y.m(c,null),m(e,o),v&&v.m(e,null),f=!0,d||(a=[T(s,"click",Pe(t[35])),T(c,"click",Pe(t[38]))],d=!0)},p(b,C){(!f||C[0]&8)&&l!==(l=b[3]?"v":">")&&Je(i,l),(!f||C[0]&4096)&&U(s,"boldText",b[12].length>0),_===(_=p(b))&&y?y.p(b,C):(y.d(1),y=_(b),y&&(y.c(),y.m(c,null))),(!f||C[0]&2824)&&U(c,"truncated",b[9]&&!b[3]&&!b[8]&&!b[11]),(!f||C[0]&512&&h!==(h=b[9]?"":"height:100%"))&&g(n,"style",h),b[4]?v?(v.p(b,C),C[0]&16&&K(v,1)):(v=dt(b),v.c(),K(v,1),v.m(e,null)):v&&(Ke(),H(v,1,1,()=>{v=null}),Be())},i(b){f||(K(v),f=!0)},o(b){H(v),f=!1},d(b){b&&A(e),y.d(),v&&v.d(),d=!1,Y(a)}}}function sn(t){let e,n,s;return{c(){e=k("span")},m(l,i){O(l,e,i),e.innerHTML=t[14],n||(s=T(e,"click",t[22]),n=!0)},p(l,i){i[0]&16384&&(e.innerHTML=l[14])},d(l){l&&A(e),n=!1,s()}}}function ln(t){let e,n,s;return{c(){e=k("textarea"),g(e,"class","svelte-1i9b4oe")},m(l,i){O(l,e,i),t[36](e),st(e,t[14]),n||(s=[T(e,"input",t[37]),T(e,"input",t[23])],n=!0)},p(l,i){i[0]&16384&&st(e,l[14])},d(l){l&&A(e),t[36](null),n=!1,Y(s)}}}function dt(t){let e,n=[],s=new Map,l,i=[],r=new Map,c,h=t[12];const o=a=>a[2];for(let a=0;a<h.length;a+=1){let p=at(t,h,a),_=o(p);s.set(_,n[a]=ht(_,p))}let f=t[13];const d=a=>a[2];for(let a=0;a<f.length;a+=1){let p=ct(t,f,a),_=d(p);r.set(_,i[a]=pt(_,p))}return{c(){e=k("div");for(let a=0;a<n.length;a+=1)n[a].c();l=N();for(let a=0;a<i.length;a+=1)i[a].c();g(e,"id","childContainer"),g(e,"class","svelte-1i9b4oe"),U(e,"hidden",!t[3])},m(a,p){O(a,e,p);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(e,null);m(e,l);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(e,null);c=!0},p(a,p){p[0]&3149890&&(h=a[12],Ke(),n=Ye(n,p,o,1,a,h,s,e,ze,ht,l,at),Be()),p[0]&2105474&&(f=a[13],Ke(),i=Ye(i,p,d,1,a,f,r,e,ze,pt,null,ct),Be()),(!c||p[0]&8)&&U(e,"hidden",!a[3])},i(a){if(!c){for(let p=0;p<h.length;p+=1)K(n[p]);for(let p=0;p<f.length;p+=1)K(i[p]);c=!0}},o(a){for(let p=0;p<n.length;p+=1)H(n[p]);for(let p=0;p<i.length;p+=1)H(i[p]);c=!1},d(a){a&&A(e);for(let p=0;p<n.length;p+=1)n[p].d();for(let p=0;p<i.length;p+=1)i[p].d()}}}function ht(t,e){let n,s,l=e[56],i;const r=()=>e[39](s,l),c=()=>e[39](null,l);let h={noteId:e[2]};return s=new He({props:h}),r(),s.$on("SwapChildren",e[20]),s.$on("DeleteChild",e[21]),s.$on("Focus",e[40]),{key:t,first:null,c(){n=Ve(),le(s.$$.fragment),this.first=n},m(o,f){O(o,n,f),te(s,o,f),i=!0},p(o,f){e=o,l!==e[56]&&(c(),l=e[56],r());const d={};f[0]&4096&&(d.noteId=e[2]),s.$set(d)},i(o){i||(K(s.$$.fragment,o),i=!0)},o(o){H(s.$$.fragment,o),i=!1},d(o){o&&A(n),c(),ne(s,o)}}}function pt(t,e){let n,s,l=e[56],i;const r=()=>e[41](s,l),c=()=>e[41](null,l);let h={noteId:e[2],isReference:!0};return s=new He({props:h}),r(),s.$on("DeleteChild",e[21]),s.$on("Focus",e[42]),{key:t,first:null,c(){n=Ve(),le(s.$$.fragment),this.first=n},m(o,f){O(o,n,f),te(s,o,f),i=!0},p(o,f){e=o,l!==e[56]&&(c(),l=e[56],r());const d={};f[0]&8192&&(d.noteId=e[2]),s.$set(d)},i(o){i||(K(s.$$.fragment,o),i=!0)},o(o){H(s.$$.fragment,o),i=!1},d(o){o&&A(n),c(),ne(s,o)}}}function on(t){let e,n,s,l=t[17]&&tn(t),i=!t[17]&&nn(t);return{c(){e=k("div"),l&&l.c(),n=N(),i&&i.c(),g(e,"id","note "+t[15].id),g(e,"class","noteWrapper svelte-1i9b4oe"),g(e,"style",t[17]?"height: 100%;":""),U(e,"isSelected",t[11]),U(e,"isExpanded",t[3]),U(e,"isFocused",t[8]),U(e,"referenceContainer",t[0])},m(r,c){O(r,e,c),l&&l.m(e,null),m(e,n),i&&i.m(e,null),s=!0},p(r,c){r[17]&&l.p(r,c),r[17]||i.p(r,c),(!s||c[0]&2048)&&U(e,"isSelected",r[11]),(!s||c[0]&8)&&U(e,"isExpanded",r[3]),(!s||c[0]&256)&&U(e,"isFocused",r[8]),(!s||c[0]&1)&&U(e,"referenceContainer",r[0])},i(r){s||(K(l),K(i),s=!0)},o(r){H(l),H(i),s=!1},d(r){r&&A(e),l&&l.d(),i&&i.d()}}}function _t(t,e){var n=t.selectionStart,s=t.selectionEnd;t.value=t.value.substring(0,n)+e+t.value.substring(s),t.selectionStart=t.selectionEnd=n+e.length}function rn(t){return t.endsWith("*")?t.slice(0,-1):t}function cn(t,e,n){let s,l,i,r,c,h,o,f,d;ge(t,Ne,u=>n(29,r=u)),ge(t,Me,u=>n(30,c=u)),ge(t,De,u=>n(31,h=u));const a=qt(),p=function(){a("DeleteChild",{target:P,isFocused:Z})},_=xt();let{noteId:y}=e,{isReference:v=!1}=e,C=ce.notes[y];const P={note:C,noteId:y,instanceId:_,Delete:p};let F,B=[],w=de([]);ge(t,w,u=>n(13,f=u));let S=[];const D=y==0;let L=C.markup;ge(t,L,u=>n(14,d=u));let V=C.children;ge(t,V,u=>n(12,o=u));let j=!1;const _e=function(){n(3,j=!0)},ie=async function(u){if(!(u<=0)){await Ue();var I=[...B,...S];I.forEach(M=>{M.Expand(),M.ExpandAll(u-1)})}};let Z=!1,{Focus:W=function(u=!1){if(h!=P&&Me.set(null),De.set(P),D){u||Ne.set([]);return}else $(P,u)}}=e;P.Focus=W;let $=function(u,I){let M=I?[...r,u]:[u];Ne.set(M)},Ee=function(u){let{child_to_swap:I,moveUp:M}=u.detail;var R=o.indexOf(I),G=R+(M?-1:1),x=G>=0&&G<o.length;if(x){let q=[...o];[q[R],q[G]]=[q[G],q[R]],V.set(q)}},oe=function(u){let{target:I,isFocused:M}=u.detail;if(M){var R=X();let x=R.indexOf(I);if(x==1)W();else{var G=R[x-1];De.set(G),Ne.set([G])}}w.update(x=>x.filter(q=>q!=I.noteId)),V.set([...o.filter(x=>x!=I.note.id)])};const X=function(){var u=[P];if(j||D){var I=[...B,...S];I.forEach(M=>{if(M!=null){var R=[];R=M.getSortedGenespan(),u=u.concat(R)}})}return u};Te(()=>{window.addEventListener("keydown",me)}),Xt(()=>{window.removeEventListener("keydown",me)});function me(u){if(Z){if(u.stopImmediatePropagation(),!s)switch(u.key.toLowerCase()){case"arrowup":u.shiftKey&&a("SwapChildren",{child_to_swap:C.id,moveUp:!0});break;case"arrowdown":u.shiftKey&&a("SwapChildren",{child_to_swap:C.id,moveUp:!1});break;case"arrowleft":a("Focus",{keepSelection:u.ctrlKey});break;case"insert":u.preventDefault();var I=ce.addNewChild({parent:C});n(3,j=!0),u.ctrlKey||Ue().then(()=>{X().forEach(R=>{R.note==I&&(De.set(R),Ne.set([R]))})});break;case"tab":u.preventDefault(),n(3,j=!j),u.shiftKey&&ie(2);break;case"enter":D||(u.preventDefault(),Me.set(P),Ue().then(()=>{F.focus(),$(P,!1),Ie()}));break;case"i":if(u.ctrlKey)debugger;break;case"c":u.ctrlKey&&(re.copiedInstances=[...r],re.copyMode="copy");break;case"x":u.ctrlKey&&(re.copiedInstances=[...r],re.copyMode="cut");break;case"v":re.copiedInstances.forEach(function(M){var R=o.includes(M.noteId);R||(C.add(M.note),re.copyMode=="cut"&&M.Delete())}),o.length>0&&n(3,j=!0);break;case"alt":u.preventDefault();break}if(s)switch(u.key.toLowerCase()){case"enter":break;case"alt":u.preventDefault(),Me.set(null);break;case"tab":u.preventDefault(),_t(F,"	");break;case"b":u.ctrlKey&&re.copiedInstances.length>0&&(u.preventDefault(),Fe(F))}}}function Fe(u){let I=re.copiedInstances[0].note,M=Se.GetNoteLinkOpeningTag(I.id)+"</a>";_t(u,M),L.set(u.value)}function E(u){u.target.tagName==="A"&&(J(+u.target.id),_e())}function J(u){f.includes(u)||o.includes(u)||w.update(M=>[...M,u])}function Ie(){var u=Math.max(z(ye).MIN_TEXTBOX_HEIGHT,F.scrollHeight)+"px";n(5,F.style.height=u,F)}D&&(Te(W),window.addEventListener("keydown",function(I){let M=function(R){for(var G=X(),x,q=0;q<G.length;q++){var Jt=G[q];if(Jt==h){x=q;break}}var Ge=x+(R?-1:1),Ht=Ge>=0&&Ge<G.length;return Ht?G[Ge]:null};if((I.key=="ArrowUp"||I.key=="ArrowDown")&&c==null&&(I.preventDefault(),!I.shiftKey)){let R=I.key=="ArrowUp",G=M(R);G!=null&&(De.set(G),$(G,I.ctrlKey))}I.key=="Delete"&&r.forEach(R=>{R.Delete()})}));var $e=function(){document.title.endsWith("*")||(document.title=document.title+"*")};let xe=!0;L.subscribe(u=>{if(xe){xe=!1;return}$e()});let et=!0;V.subscribe(u=>{if(et){et=!1;return}$e()}),D&&Te(()=>{document.title=rn(document.title)});let tt;const Tt=ye.subscribe(u=>{n(9,tt=u.TRUNCATE_NOTES)});Te(()=>()=>Tt());function At(u,I){se[u?"unshift":"push"](()=>{B[I]=u,n(6,B)})}const Ot=u=>{W(u.detail.keepSelection)},Ft=u=>{W(u.ctrlKey)},Lt=()=>{n(3,j=!j)};function Mt(u){se[u?"unshift":"push"](()=>{F=u,n(5,F)})}function Ut(){d=this.value,L.set(d)}const Rt=u=>{W(u.ctrlKey)};function Pt(u,I){se[u?"unshift":"push"](()=>{B[I]=u,n(6,B)})}const Kt=u=>{W(u.detail.keepSelection)};function Bt(u,I){se[u?"unshift":"push"](()=>{S[I]=u,n(7,S)})}const Vt=u=>{W(u.detail.keepSelection)};return t.$$set=u=>{"noteId"in u&&n(2,y=u.noteId),"isReference"in u&&n(0,v=u.isReference),"Focus"in u&&n(1,W=u.Focus)},t.$$.update=()=>{t.$$.dirty[0]&1342177280&&n(10,s=c==P),t.$$.dirty[0]&24&&n(4,l=j||l),t.$$.dirty[0]&268435456|t.$$.dirty[1]&1&&n(8,Z=h===P),t.$$.dirty[0]&805306368&&n(11,i=r.includes(P))},[v,W,y,j,l,F,B,S,Z,tt,s,i,o,f,d,C,w,D,L,V,Ee,oe,E,Ie,_,_e,ie,X,P,r,c,h,At,Ot,Ft,Lt,Mt,Ut,Rt,Pt,Kt,Bt,Vt]}class He extends pe{constructor(e){super(),he(this,e,cn,on,ae,{instanceId:24,noteId:2,isReference:0,Expand:25,ExpandAll:26,Focus:1,getSortedGenespan:27},null,[-1,-1])}get instanceId(){return this.$$.ctx[24]}get Expand(){return this.$$.ctx[25]}get ExpandAll(){return this.$$.ctx[26]}get getSortedGenespan(){return this.$$.ctx[27]}}const Ce="tnpKeys";function Ze(t,e){try{an(t,e),document.title=t}catch(n){if(n instanceof DOMException&&n.name==="QuotaExceededError")fn()&&Ze(t,e);else throw n}}function an(t,e){let n=JSON.parse(localStorage.getItem(Ce)??"[]");if(!n.includes(t)){let s=[t,...n];localStorage.setItem(Ce,JSON.stringify(s))}localStorage.setItem(t,e)}function un(t){let e=JSON.parse(localStorage.getItem(Ce)??"[]");const n=e.indexOf(t);n>-1&&(e.splice(n,1),localStorage.removeItem(t),localStorage.setItem(Ce,JSON.stringify(e)))}function fn(){let t=JSON.parse(localStorage.getItem(Ce)??"[]");if(t.length===0)return!1;const e=t[t.length-1];return t.pop(),localStorage.removeItem(e),localStorage.setItem(Ce,JSON.stringify(t)),!0}function dn(t,e){let n;return function(...l){clearTimeout(n),n=setTimeout(()=>{t.apply(this,l)},e)}}function hn(t){return t.endsWith("*")?t.slice(0,-1):t}function pn(t){let n=!1;return Te(()=>{const s=ye.subscribe(r=>{n=r.DISABLE_AUTO_SAVE}),i=dn(()=>{if(n||!document.title.endsWith("*"))return;const r=ce.getCopyForDownload(),c=JSON.stringify(r);Ze(hn(document.title),c)},12e4);return document.addEventListener("keydown",i),document.addEventListener("mousedown",i),n||i(),()=>{document.removeEventListener("keydown",i),document.removeEventListener("mousedown",i),s()}}),[]}class _n extends pe{constructor(e){super(),he(this,e,pn,null,ae,{})}}function mn(t,e,n){const s=t.slice();return s[6]=e[n][0],s[7]=e[n][1],s}function gn(t){let e,n,s,l,i,r,c;return{c(){e=k("tr"),n=k("td"),s=ee(t[6]),l=N(),i=k("td"),r=ee(t[7]),c=N(),g(n,"class","svelte-3kxyx8"),g(i,"class","svelte-3kxyx8")},m(h,o){O(h,e,o),m(e,n),m(n,s),m(e,l),m(e,i),m(i,r),m(e,c)},p:Q,d(h){h&&A(e)}}}function bn(t){let e,n=t[0]?"X":"?",s,l,i,r,c,h,o,f,d,a,p,_=[["Insert","Add a new note under the focused one"],["Delete","Delete selected notes"],["Up/Down Arrow","Move focus up/down"],["Enter","Make a note editable"],["Alt","Return an editable note to being uneditable"],["Shift+Up/Down","Swap Adjacent Siblings"],["Click on note","Focuses note"],["Ctrl+Focus Note","Keeps notes selected while focusing new one"],["Ctrl+C/X/V","Copy/Cut/Paste selected notes"],["Ctrl+B","Paste a reference of the copied note into the text box"],["Tab","Toggles whether focused note is expanded"],["Tab+Shift","Also expands children and grandchildren"]],y=[];for(let v=0;v<12;v+=1)y[v]=gn(mn(t,_,v));return{c(){e=k("button"),s=ee(n),l=N(),i=k("div"),r=k("div"),r.innerHTML="<h2>Controls</h2>",c=N(),h=k("table"),o=k("thead"),o.innerHTML=`<tr><th class="svelte-3kxyx8">Command</th> 
        <th class="svelte-3kxyx8">Description</th></tr>`,f=N(),d=k("tbody");for(let v=0;v<12;v+=1)y[v].c();g(r,"class","title svelte-3kxyx8"),g(h,"class","svelte-3kxyx8"),g(i,"class","menu svelte-3kxyx8"),je(i,"display",t[0]?"block":"none")},m(v,b){O(v,e,b),m(e,s),O(v,l,b),O(v,i,b),m(i,r),m(i,c),m(i,h),m(h,o),m(h,f),m(h,d);for(let C=0;C<12;C+=1)y[C]&&y[C].m(d,null);t[3](i),a||(p=T(e,"click",Pe(t[2])),a=!0)},p(v,[b]){b&1&&n!==(n=v[0]?"X":"?")&&Je(s,n),b&1&&je(i,"display",v[0]?"block":"none")},i:Q,o:Q,d(v){v&&A(e),v&&A(l),v&&A(i),St(y,v),t[3](null),a=!1,p()}}}function vn(t,e,n){let s=!1,l;function i(){n(0,s=!s)}function r(c){se[c?"unshift":"push"](()=>{l=c,n(1,l)})}return[s,l,i,r]}class kn extends pe{constructor(e){super(),he(this,e,vn,bn,ae,{})}}function mt(t){let e,n,s,l,i,r,c,h,o,f;return{c(){e=k("div"),n=k("div"),s=k("p"),l=ee(t[0]),i=N(),r=k("button"),r.textContent="Yes",c=N(),h=k("button"),h.textContent="No",g(r,"class","svelte-v3dq6t"),g(h,"class","svelte-v3dq6t"),g(n,"class","modal-content svelte-v3dq6t"),g(e,"class","modal svelte-v3dq6t")},m(d,a){O(d,e,a),m(e,n),m(n,s),m(s,l),m(n,i),m(n,r),m(n,c),m(n,h),o||(f=[T(r,"click",function(){fe(t[1])&&t[1].apply(this,arguments)}),T(h,"click",function(){fe(t[2])&&t[2].apply(this,arguments)})],o=!0)},p(d,a){t=d,a&1&&Je(l,t[0])},d(d){d&&A(e),o=!1,Y(f)}}}function wn(t){let e,n=t[3]&&mt(t);return{c(){n&&n.c(),e=Ve()},m(s,l){n&&n.m(s,l),O(s,e,l)},p(s,[l]){s[3]?n?n.p(s,l):(n=mt(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Q,o:Q,d(s){n&&n.d(s),s&&A(e)}}}function yn(t,e,n){let{message:s}=e,{onConfirm:l}=e,{onCancel:i}=e,{visible:r}=e;return t.$$set=c=>{"message"in c&&n(0,s=c.message),"onConfirm"in c&&n(1,l=c.onConfirm),"onCancel"in c&&n(2,i=c.onCancel),"visible"in c&&n(3,r=c.visible)},[s,l,i,r]}class Sn extends pe{constructor(e){super(),he(this,e,yn,wn,ae,{message:0,onConfirm:1,onCancel:2,visible:3})}}function gt(t,e,n){const s=t.slice();return s[14]=e[n],s}function bt(t){let e,n,s,l,i,r,c,h,o,f=t[2],d=[];for(let a=0;a<f.length;a+=1)d[a]=vt(gt(t,f,a));return{c(){e=k("div"),n=k("div"),s=k("table"),l=k("tr"),i=k("td"),r=k("button"),r.textContent="×",c=N();for(let a=0;a<d.length;a+=1)d[a].c();g(r,"class","close-button svelte-9sk29o"),g(i,"colspan","2"),g(i,"class","svelte-9sk29o"),g(l,"class","header-row svelte-9sk29o"),g(s,"class","svelte-9sk29o"),g(n,"class","modal-content svelte-9sk29o"),g(e,"class","modal svelte-9sk29o")},m(a,p){O(a,e,p),m(e,n),m(n,s),m(s,l),m(l,i),m(i,r),m(s,c);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(s,null);h||(o=[T(r,"click",function(){fe(t[1])&&t[1].apply(this,arguments)}),T(r,"keypress",function(){fe(t[1])&&t[1].apply(this,arguments)})],h=!0)},p(a,p){if(t=a,p&102){f=t[2];let _;for(_=0;_<f.length;_+=1){const y=gt(t,f,_);d[_]?d[_].p(y,p):(d[_]=vt(y),d[_].c(),d[_].m(s,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=f.length}},d(a){a&&A(e),St(d,a),h=!1,Y(o)}}}function vt(t){let e,n,s,l=t[14]+"",i,r,c,h,o,f;function d(){return t[10](t[14])}function a(){return t[11](t[14])}function p(){return t[12](t[14])}return{c(){e=k("tr"),n=k("td"),s=k("button"),i=ee(l),r=N(),c=k("td"),c.textContent="x",h=N(),g(s,"class","filename-button svelte-9sk29o"),g(n,"class","filename svelte-9sk29o"),g(c,"class","delete-button svelte-9sk29o"),g(e,"class","svelte-9sk29o")},m(_,y){O(_,e,y),m(e,n),m(n,s),m(s,i),m(e,r),m(e,c),m(e,h),o||(f=[T(s,"click",d),T(c,"click",a),T(c,"keypress",p)],o=!0)},p(_,y){t=_,y&4&&l!==(l=t[14]+"")&&Je(i,l)},d(_){_&&A(e),o=!1,Y(f)}}}function Cn(t){let e,n,s,l=t[0]&&bt(t);return n=new Sn({props:{message:`Are you sure you want to delete ${t[4]}?`,onConfirm:t[7],onCancel:t[8],visible:t[3]}}),{c(){l&&l.c(),e=N(),le(n.$$.fragment)},m(i,r){l&&l.m(i,r),O(i,e,r),te(n,i,r),s=!0},p(i,[r]){i[0]?l?l.p(i,r):(l=bt(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null);const c={};r&16&&(c.message=`Are you sure you want to delete ${i[4]}?`),r&8&&(c.visible=i[3]),n.$set(c)},i(i){s||(K(n.$$.fragment,i),s=!0)},o(i){H(n.$$.fragment,i),s=!1},d(i){l&&l.d(i),i&&A(e),ne(n,i)}}}function En(t,e,n){let{visible:s=!1}=e,{toggleModal:l}=e,{merge_tnp_file:i}=e,r=[],c=!1,h="";function o(){n(2,r=JSON.parse(localStorage.getItem("tnpKeys"))??[])}function f(b){const C=localStorage.getItem(b);i(C,b)}function d(b){n(4,h=b),n(3,c=!0)}function a(){un(h),o(),n(3,c=!1)}function p(){n(3,c=!1)}const _=b=>{f(b),l()},y=b=>d(b),v=b=>d(b);return t.$$set=b=>{"visible"in b&&n(0,s=b.visible),"toggleModal"in b&&n(1,l=b.toggleModal),"merge_tnp_file"in b&&n(9,i=b.merge_tnp_file)},t.$$.update=()=>{t.$$.dirty&1&&s&&o()},[s,l,r,c,h,f,d,a,p,i,_,y,v]}class In extends pe{constructor(e){super(),he(this,e,En,Cn,ae,{visible:0,toggleModal:1,merge_tnp_file:9})}}function Dn(t){let e,n,s,l,i,r,c,h,o,f,d,a,p,_,y,v,b,C,P,F,B,w,S,D,L,V,j,_e,ie,Z,W,$,Ee,oe,X,me,Fe;return Z=new kn({}),$=new In({props:{visible:t[2],toggleModal:t[10],merge_tnp_file:t[7]}}),oe=new _n({}),{c(){e=k("div"),n=k("button"),n.textContent="File",s=N(),l=k("div"),i=k("button"),i.textContent="Download to Computer",r=N(),c=k("button"),h=ee(`Upload from Computer\r
        `),o=k("input"),f=N(),d=k("button"),d.textContent="Save in browser",a=N(),p=k("button"),p.textContent="Load from browser",_=N(),y=k("button"),y.textContent="Save as text",v=N(),b=k("div"),C=k("button"),C.textContent="Settings",P=N(),F=k("div"),B=k("label"),w=k("input"),S=ee(`\r
        Truncate notes`),D=N(),L=k("label"),V=k("input"),j=ee(`\r
        Disable Auto-save`),_e=N(),ie=k("div"),le(Z.$$.fragment),W=N(),le($.$$.fragment),Ee=N(),le(oe.$$.fragment),g(n,"class","dropdown-button svelte-ptc0mw"),g(i,"class","svelte-ptc0mw"),g(o,"id","fileInput"),g(o,"type","file"),g(o,"accept",".tnp"),je(o,"display","none"),g(c,"class","svelte-ptc0mw"),g(d,"class","svelte-ptc0mw"),g(p,"class","svelte-ptc0mw"),g(y,"class","svelte-ptc0mw"),g(l,"id","FileDropdown"),g(l,"class","dropdown-content svelte-ptc0mw"),U(l,"hidden",!t[3]),g(e,"class","dropdown svelte-ptc0mw"),g(C,"class","dropdown-button svelte-ptc0mw"),g(w,"type","checkbox"),w.checked=t[5],g(B,"class","svelte-ptc0mw"),g(V,"type","checkbox"),V.checked=t[6],g(L,"class","svelte-ptc0mw"),g(F,"id","SettingsDropdown"),g(F,"class","dropdown-content svelte-ptc0mw"),U(F,"hidden",!t[4]),g(b,"class","dropdown svelte-ptc0mw"),g(ie,"class","menu-right svelte-ptc0mw")},m(E,J){O(E,e,J),m(e,n),m(e,s),m(e,l),m(l,i),m(l,r),m(l,c),m(c,h),m(c,o),t[17](o),m(l,f),m(l,d),m(l,a),m(l,p),m(l,_),m(l,y),O(E,v,J),O(E,b,J),m(b,C),m(b,P),m(b,F),m(F,B),m(B,w),m(B,S),m(F,D),m(F,L),m(L,V),m(L,j),O(E,_e,J),O(E,ie,J),te(Z,ie,null),O(E,W,J),te($,E,J),O(E,Ee,J),te(oe,E,J),X=!0,me||(Fe=[T(n,"click",t[12]),T(i,"click",function(){fe(t[0])&&t[0].apply(this,arguments)}),T(o,"change",t[8]),T(c,"click",t[18]),T(d,"click",t[9]),T(p,"click",t[10]),T(y,"click",t[15]),T(C,"click",t[11]),T(w,"change",t[13]),T(V,"change",t[14])],me=!0)},p(E,[J]){t=E,(!X||J&8)&&U(l,"hidden",!t[3]),(!X||J&32)&&(w.checked=t[5]),(!X||J&64)&&(V.checked=t[6]),(!X||J&16)&&U(F,"hidden",!t[4]);const Ie={};J&4&&(Ie.visible=t[2]),$.$set(Ie)},i(E){X||(K(Z.$$.fragment,E),K($.$$.fragment,E),K(oe.$$.fragment,E),X=!0)},o(E){H(Z.$$.fragment,E),H($.$$.fragment,E),H(oe.$$.fragment,E),X=!1},d(E){E&&A(e),t[17](null),E&&A(v),E&&A(b),E&&A(_e),E&&A(ie),ne(Z),E&&A(W),ne($,E),E&&A(Ee),ne(oe,E),me=!1,Y(Fe)}}}function Nn(t){return t.slice(0,-4)}function Tn(){document.title=Nt(document.title)}function Nt(t){return t.endsWith("*")?t.slice(0,-1):t}function An(t){var e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(t)),e.setAttribute("download",document.title+".tnp"),e.click()}function kt(t,e){const n=s=>{!s.target.closest("#"+t)&&(e(),document.removeEventListener("mousedown",n))};setTimeout(()=>{document.addEventListener("mousedown",n)},0)}function On(t,e,n){let s;function l(w,S){let D=new Se,L=JSON.parse(w);D.loadFromJSON(L),ce.Merge(D,S)}let i=async function(){let w=Array.from(s.files);for(var S=0;S<w.length;S++){var D=w[S];await r(D)}n(1,s.value="",s)};async function r(w){if(w.name.endsWith(".tnp")){var S=await w.text();l(S,Nn(w.name))}}let{download:c=function(){var w=ce.getCopyForDownload(),S=JSON.stringify(w),D=new Blob([S],{type:"application/octet-binary"});An(D),Tn()}}=e;function h(){let w=prompt("Enter filename:",Nt(document.title));if(w!==null&&w!==""){let S=ce.getCopyForDownload(),D=JSON.stringify(S);Ze(w,D)}}let o=!1;function f(){n(2,o=!o)}let d=!1,a=!1;function p(){n(4,a=!a),n(3,d=!1),a&&kt("SettingsDropdown",()=>{n(4,a=!1)})}function _(){n(3,d=!d),d&&kt("FileDropdown",()=>{n(3,d=!1)})}let y,v;ye.subscribe(w=>{n(5,y=w.TRUNCATE_NOTES),n(6,v=w.DISABLE_AUTO_SAVE)});function b(){ye.update(w=>({...w,TRUNCATE_NOTES:!w.TRUNCATE_NOTES}))}function C(){ye.update(w=>({...w,DISABLE_AUTO_SAVE:!w.DISABLE_AUTO_SAVE}))}function P(){let w=ce.getPlainText();console.log(w)}function F(w){se[w?"unshift":"push"](()=>{s=w,n(1,s)})}const B=()=>s.click();return t.$$set=w=>{"download"in w&&n(0,c=w.download)},[c,s,o,d,a,y,v,l,i,h,f,p,_,b,C,P,r,F,B]}class Fn extends pe{constructor(e){super(),he(this,e,On,Dn,ae,{uploadOneFile:16,download:0})}get uploadOneFile(){return this.$$.ctx[16]}}function Ln(t){let e,n,s,l,i,r,c,h,o,f,d={};return l=new Fn({props:d}),t[5](l),c=new He({props:{noteId:0}}),{c(){e=k("main"),n=k("div"),s=k("span"),le(l.$$.fragment),i=N(),r=k("div"),le(c.$$.fragment),g(s,"id","Menubar"),g(s,"class","svelte-1kacpug"),g(n,"id","Topbar"),g(n,"class","svelte-1kacpug"),g(r,"class","notepad svelte-1kacpug"),g(e,"class","svelte-1kacpug"),U(e,"dragging",t[1])},m(a,p){O(a,e,p),m(e,n),m(n,s),te(l,s,null),m(e,i),m(e,r),te(c,r,null),h=!0,o||(f=[T(e,"dragover",t[2]),T(e,"dragleave",t[3]),T(e,"drop",t[4])],o=!0)},p(a,[p]){const _={};l.$set(_),(!h||p&2)&&U(e,"dragging",a[1])},i(a){h||(K(l.$$.fragment,a),K(c.$$.fragment,a),h=!0)},o(a){H(l.$$.fragment,a),H(c.$$.fragment,a),h=!1},d(a){a&&A(e),t[5](null),ne(l),ne(c),o=!1,Y(f)}}}function Mn(t,e,n){let s,l=!1;function i(o){o.preventDefault(),n(1,l=!0)}function r(){n(1,l=!1)}function c(o){var f;if(o.preventDefault(),n(1,l=!1),(f=o.dataTransfer)!=null&&f.files.length){const d=o.dataTransfer.files[0];s.uploadOneFile(d)}}function h(o){se[o?"unshift":"push"](()=>{s=o,n(0,s)})}return[s,l,i,r,c,h]}class Un extends pe{constructor(e){super(),he(this,e,Mn,Ln,ae,{})}}new Un({target:document.getElementById("app")});
