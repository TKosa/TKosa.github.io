(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function K(){}function et(t){return t()}function Pe(){return Object.create(null)}function j(t){t.forEach(et)}function $e(t){return typeof t=="function"}function pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Et(t){return Object.keys(t).length===0}function tt(t,...e){if(t==null)return K;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function B(t){let e;return tt(t,n=>e=n)(),e}function ie(t,e,n){t.$$.on_destroy.push(tt(e,n))}function w(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function It(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function ne(t){return document.createTextNode(t)}function R(){return ne(" ")}function we(){return ne("")}function z(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function nt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ct(t){return Array.from(t.childNodes)}function st(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ge(t,e){t.value=e??""}function Nt(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function O(t,e,n){t.classList[n?"add":"remove"](e)}function Dt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}let ue;function le(t){ue=t}function Le(){if(!ue)throw new Error("Function called outside component initialization");return ue}function Ne(t){Le().$$.on_mount.push(t)}function St(t){Le().$$.on_destroy.push(t)}function At(){const t=Le();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=Dt(e,n,{cancelable:s});return i.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}const ee=[],V=[];let te=[];const Xe=[],it=Promise.resolve();let Fe=!1;function rt(){Fe||(Fe=!0,it.then(ot))}function De(){return rt(),it}function Te(t){te.push(t)}const Se=new Set;let Z=0;function ot(){if(Z!==0)return;const t=ue;do{try{for(;Z<ee.length;){const e=ee[Z];Z++,le(e),Ft(e.$$)}}catch(e){throw ee.length=0,Z=0,e}for(le(null),ee.length=0,Z=0;V.length;)V.pop()();for(let e=0;e<te.length;e+=1){const n=te[e];Se.has(n)||(Se.add(n),n())}te.length=0}while(ee.length);for(;Xe.length;)Xe.pop()();Fe=!1,Se.clear(),le(t)}function Ft(t){if(t.fragment!==null){t.update(),j(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Te)}}function Tt(t){const e=[],n=[];te.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),te=e}const ve=new Set;let q;function ae(){q={r:0,c:[],p:q}}function fe(){q.r||j(q.c),q=q.p}function N(t,e){t&&t.i&&(ve.delete(t),t.i(e))}function M(t,e,n,s){if(t&&t.o){if(ve.has(t))return;ve.add(t),q.c.push(()=>{ve.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Oe(t,e){M(t,1,1,()=>{e.delete(t.key)})}function Me(t,e,n,s,i,o,l,a,p,r,c,h){let f=t.length,d=o.length,_=f;const g={};for(;_--;)g[t[_].key]=_;const m=[],v=new Map,F=new Map,C=[];for(_=d;_--;){const k=h(i,o,_),H=n(k);let L=l.get(H);L?s&&C.push(()=>L.p(k,e)):(L=r(H,k),L.c()),v.set(H,m[_]=L),H in g&&F.set(H,Math.abs(_-g[H]))}const G=new Set,W=new Set;function J(k){N(k,1),k.m(a,c),l.set(k.key,k),c=k.first,d--}for(;f&&d;){const k=m[d-1],H=t[f-1],L=k.key,U=H.key;k===H?(c=k.first,f--,d--):v.has(U)?!l.has(L)||G.has(L)?J(k):W.has(U)?f--:F.get(L)>F.get(U)?(W.add(L),J(k)):(G.add(U),f--):(p(H,l),f--)}for(;f--;){const k=t[f];v.has(k.key)||p(k,l)}for(;d;)J(m[d-1]);return j(C),m}function se(t){t&&t.c()}function Q(t,e,n,s){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),s||Te(()=>{const l=t.$$.on_mount.map(et).filter($e);t.$$.on_destroy?t.$$.on_destroy.push(...l):j(l),t.$$.on_mount=[]}),o.forEach(Te)}function Y(t,e){const n=t.$$;n.fragment!==null&&(Tt(n.after_update),j(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ot(t,e){t.$$.dirty[0]===-1&&(ee.push(t),rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ye(t,e,n,s,i,o,l,a=[-1]){const p=ue;le(t);const r=t.$$={fragment:null,ctx:[],props:o,update:K,not_equal:i,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(p?p.$$.context:[])),callbacks:Pe(),dirty:a,skip_bound:!1,root:e.target||p.$$.root};l&&l(r.root);let c=!1;if(r.ctx=n?n(t,e.props||{},(h,f,...d)=>{const _=d.length?d[0]:f;return r.ctx&&i(r.ctx[h],r.ctx[h]=_)&&(!r.skip_bound&&r.bound[h]&&r.bound[h](_),c&&Ot(t,h)),f}):[],r.update(),c=!0,j(r.before_update),r.fragment=s?s(r.ctx):!1,e.target){if(e.hydrate){const h=Ct(e.target);r.fragment&&r.fragment.l(h),h.forEach(A)}else r.fragment&&r.fragment.c();e.intro&&N(t.$$.fragment),Q(t,e.target,e.anchor,e.customElement),ot()}le(p)}class ke{$destroy(){Y(this,1),this.$destroy=K}$on(e,n){if(!$e(n))return K;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!Et(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const x=[];function de(t,e=K){let n;const s=new Set;function i(a){if(pe(t,a)&&(t=a,n)){const p=!x.length;for(const r of s)r[1](),x.push(r,t);if(p){for(let r=0;r<x.length;r+=2)x[r][0](x[r+1]);x.length=0}}}function o(a){i(a(t))}function l(a,p=K){const r=[a,p];return s.add(r),s.size===1&&(n=e(i)||K),a(t),()=>{s.delete(r),s.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}class me{constructor(e,n="",s=[]){this.id=e,this.markup=de(n),this.children=de(s)}add(e){B(this.children).includes(e.id)||this.children.set([...B(this.children),e.id])}}const je=2;class he{constructor(){var e=new me(0);this.notes={0:e},this.uID=1,this.version=je}reset(){var e=new me(0);this.notes={0:e},this.uID=1}loadFromJSON(e){var n;for(n in e.notes){var s=e.notes[n],i=new me(n);i.children.set(s.children),i.markup.set(s.markup),this.notes[n]=i}}getCopyForDownload(){let e=(function(s){let i=(function(o,l){l[o.id]||(l[o.id]={id:o.id,markup:B(o.markup),children:B(o.children)},B(o.children).forEach((function(a){i(this.notes[a],l)}).bind(this)))}).bind(this);return i(this.notes[0],s),s}).bind(this),n={version:this.version,notes:{}};return e(n.notes),n}addNewChild({parent:e}){var n=this.getNewNote();return e.add(n),n}getNoteByID(e){return this.notes[e]}getNextUID(){for(;this.uID in this.notes;)this.uID++;return this.uID}swapPlaces(e,n,s){for(var i=B(e.children),o=0;o<i.length;o++)if([n.id,s.id].includes(i[o])){[i[o],i[o+1]]=[i[o+1],i[o]];return}}getNewNote(){var e=this.getNextUID(),n=new me(e);return this.notes[e]=n,n}getRoot(){var e=this.notes[0];if(!e)throw new Error("no root found");return e}Merge(e){var n=e.notes[0],s=0,i=(function(){return s+=1,!(s in this.notes)&&!(s in e.notes)?s:i()}).bind(this),o;for(var o in e.notes){var l=i();e.editNoteId(+o,l)}this.notes={...this.notes,...e.notes};var a=B(this.getRoot().children).length==0;return a?B(n.children).forEach(p=>{this.getRoot().add(this.notes[p])}):this.getRoot().add(n),n}editNoteId(e,n){var s=this.notes[e];s.id=n,delete this.notes[e],this.notes[n]=s;var i;for(i in this.notes){var s=this.notes[i];s.children.set(B(s.children).map(l=>l==e?n:l)),s.markup.set(String(B(s.markup)).replace(he.GetNoteLinkOpeningTag(e),he.GetNoteLinkOpeningTag(n)))}}Update(){for(this.version||(this.version=1);this.version<je;)this.UpgradeByOneVersion()}UpgradeByOneVersion(){switch(this.version){}this.version++}static GetNoteLinkOpeningTag(e){return`<a id="${e}" href="#0">`}swapNotes(e,n,s){var i=B(e.children).map(function(o){return o==n.id?s.id:o==s.id?n.id:o});e.children.set(i)}}let ce=new he,Mt=0;const $t=function(){return Mt++},re=de(null),be=de(null),oe=de([]),Ae={copiedInstances:[]},Lt={MIN_TEXTBOX_HEIGHT:50};function We(t,e,n){const s=t.slice();return s[2]=e[n],s[48]=e,s[49]=n,s}function ze(t,e,n){const s=t.slice();return s[2]=e[n],s[50]=e,s[49]=n,s}function Je(t,e,n){const s=t.slice();return s[2]=e[n],s[51]=e,s[49]=n,s}function Ut(t){let e,n=[],s=new Map,i,o,l,a=t[5];const p=r=>r[2];for(let r=0;r<a.length;r+=1){let c=Je(t,a,r),h=p(c);s.set(h,n[r]=Ve(h,c))}return{c(){e=E("div");for(let r=0;r<n.length;r+=1)n[r].c();b(e,"id","notepad"),b(e,"class","svelte-174kttm"),O(e,"isFocused",t[11])},m(r,c){$(r,e,c);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);i=!0,o||(l=z(e,"click",nt(t[32])),o=!0)},p(r,c){c[0]&786722&&(a=r[5],ae(),n=Me(n,c,p,1,r,a,s,e,Oe,Ve,null,Je),fe()),(!i||c[0]&2048)&&O(e,"isFocused",r[11])},i(r){if(!i){for(let c=0;c<a.length;c+=1)N(n[c]);i=!0}},o(r){for(let c=0;c<n.length;c+=1)M(n[c]);i=!1},d(r){r&&A(e);for(let c=0;c<n.length;c+=1)n[c].d();o=!1,l()}}}function Ve(t,e){let n,s,i=e[49],o;const l=()=>e[30](s,i),a=()=>e[30](null,i);let p={noteId:e[2]};return s=new Ee({props:p}),l(),s.$on("SwapChildren",e[18]),s.$on("DeleteChild",e[19]),s.$on("Focus",e[31]),{key:t,first:null,c(){n=we(),se(s.$$.fragment),this.first=n},m(r,c){$(r,n,c),Q(s,r,c),o=!0},p(r,c){e=r,i!==e[49]&&(a(),i=e[49],l());const h={};c[0]&32&&(h.noteId=e[2]),s.$set(h)},i(r){o||(N(s.$$.fragment,r),o=!0)},o(r){M(s.$$.fragment,r),o=!1},d(r){r&&A(n),a(),Y(s,r)}}}function Ht(t){let e,n,s=t[3]?"v":">",i,o,l,a,p,r,c,h;function f(m,v){return m[12]?Rt:Kt}let d=f(t),_=d(t),g=t[4]&&qe(t);return{c(){e=E("div"),n=E("button"),i=ne(s),o=R(),l=E("span"),_.c(),a=R(),g&&g.c(),p=we(),b(n,"id","toggleButton"),b(n,"class","svelte-174kttm"),O(n,"boldText",t[5].length>0),b(l,"id","text"),b(l,"class","svelte-174kttm"),b(e,"id","topRow"),b(e,"class","svelte-174kttm")},m(m,v){$(m,e,v),w(e,n),w(n,i),w(e,o),w(e,l),_.m(l,null),$(m,a,v),g&&g.m(m,v),$(m,p,v),r=!0,c||(h=[z(n,"click",t[33]),z(l,"click",nt(t[36]))],c=!0)},p(m,v){(!r||v[0]&8)&&s!==(s=m[3]?"v":">")&&st(i,s),(!r||v[0]&32)&&O(n,"boldText",m[5].length>0),d===(d=f(m))&&_?_.p(m,v):(_.d(1),_=d(m),_&&(_.c(),_.m(l,null))),m[4]?g?(g.p(m,v),v[0]&16&&N(g,1)):(g=qe(m),g.c(),N(g,1),g.m(p.parentNode,p)):g&&(ae(),M(g,1,1,()=>{g=null}),fe())},i(m){r||(N(g),r=!0)},o(m){M(g),r=!1},d(m){m&&A(e),_.d(),m&&A(a),g&&g.d(m),m&&A(p),c=!1,j(h)}}}function Kt(t){let e;return{c(){e=E("span")},m(n,s){$(n,e,s),e.innerHTML=t[6]},p(n,s){s[0]&64&&(e.innerHTML=n[6])},d(n){n&&A(e)}}}function Rt(t){let e,n,s;return{c(){e=E("textarea"),b(e,"class","svelte-174kttm")},m(i,o){$(i,e,o),t[34](e),Ge(e,t[6]),n||(s=[z(e,"input",t[35]),z(e,"input",t[20])],n=!0)},p(i,o){o[0]&64&&Ge(e,i[6])},d(i){i&&A(e),t[34](null),n=!1,j(s)}}}function qe(t){let e,n=[],s=new Map,i,o=[],l=new Map,a,p=t[5];const r=f=>f[2];for(let f=0;f<p.length;f+=1){let d=ze(t,p,f),_=r(d);s.set(_,n[f]=Qe(_,d))}let c=t[10];const h=f=>f[2];for(let f=0;f<c.length;f+=1){let d=We(t,c,f),_=h(d);l.set(_,o[f]=Ye(_,d))}return{c(){e=E("div");for(let f=0;f<n.length;f+=1)n[f].c();i=R();for(let f=0;f<o.length;f+=1)o[f].c();b(e,"id","childContainer"),b(e,"class","svelte-174kttm"),O(e,"hidden",!t[3])},m(f,d){$(f,e,d);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(e,null);w(e,i);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(e,null);a=!0},p(f,d){d[0]&786722&&(p=f[5],ae(),n=Me(n,d,r,1,f,p,s,e,Oe,Qe,i,ze),fe()),d[0]&525826&&(c=f[10],ae(),o=Me(o,d,h,1,f,c,l,e,Oe,Ye,null,We),fe()),(!a||d[0]&8)&&O(e,"hidden",!f[3])},i(f){if(!a){for(let d=0;d<p.length;d+=1)N(n[d]);for(let d=0;d<c.length;d+=1)N(o[d]);a=!0}},o(f){for(let d=0;d<n.length;d+=1)M(n[d]);for(let d=0;d<o.length;d+=1)M(o[d]);a=!1},d(f){f&&A(e);for(let d=0;d<n.length;d+=1)n[d].d();for(let d=0;d<o.length;d+=1)o[d].d()}}}function Qe(t,e){let n,s,i=e[49],o;const l=()=>e[37](s,i),a=()=>e[37](null,i);let p={noteId:e[2]};return s=new Ee({props:p}),l(),s.$on("SwapChildren",e[18]),s.$on("DeleteChild",e[19]),s.$on("Focus",e[38]),{key:t,first:null,c(){n=we(),se(s.$$.fragment),this.first=n},m(r,c){$(r,n,c),Q(s,r,c),o=!0},p(r,c){e=r,i!==e[49]&&(a(),i=e[49],l());const h={};c[0]&32&&(h.noteId=e[2]),s.$set(h)},i(r){o||(N(s.$$.fragment,r),o=!0)},o(r){M(s.$$.fragment,r),o=!1},d(r){r&&A(n),a(),Y(s,r)}}}function Ye(t,e){let n,s,i=e[49],o;const l=()=>e[39](s,i),a=()=>e[39](null,i);let p={noteId:e[2],isReference:!0};return s=new Ee({props:p}),l(),s.$on("DeleteChild",e[19]),s.$on("Focus",e[40]),{key:t,first:null,c(){n=we(),se(s.$$.fragment),this.first=n},m(r,c){$(r,n,c),Q(s,r,c),o=!0},p(r,c){e=r,i!==e[49]&&(a(),i=e[49],l());const h={};c[0]&1024&&(h.noteId=e[2]),s.$set(h)},i(r){o||(N(s.$$.fragment,r),o=!0)},o(r){M(s.$$.fragment,r),o=!1},d(r){r&&A(n),a(),Y(s,r)}}}function Bt(t){let e,n,s,i=t[15]&&Ut(t),o=!t[15]&&Ht(t);return{c(){e=E("div"),i&&i.c(),n=R(),o&&o.c(),b(e,"id","note "+t[14].id),b(e,"class","noteWrapper svelte-174kttm"),b(e,"style",t[15]?"height: 100%;":""),O(e,"isSelected",t[13]),O(e,"isExpanded",t[3]),O(e,"isFocused",t[11]),O(e,"referenceContainer",t[0])},m(l,a){$(l,e,a),i&&i.m(e,null),w(e,n),o&&o.m(e,null),s=!0},p(l,a){l[15]&&i.p(l,a),l[15]||o.p(l,a),(!s||a[0]&8192)&&O(e,"isSelected",l[13]),(!s||a[0]&8)&&O(e,"isExpanded",l[3]),(!s||a[0]&2048)&&O(e,"isFocused",l[11]),(!s||a[0]&1)&&O(e,"referenceContainer",l[0])},i(l){s||(N(i),N(o),s=!0)},o(l){M(i),M(o),s=!1},d(l){l&&A(e),i&&i.d(),o&&o.d()}}}function Pt(t){return t.endsWith("*")?t.slice(0,-1):t}function Gt(t,e,n){let s,i,o,l,a,p,r,c;ie(t,oe,u=>n(27,p=u)),ie(t,be,u=>n(28,r=u)),ie(t,re,u=>n(29,c=u));const h=At(),f=function(){h("DeleteChild",{target:F,isFocused:_e})},d=$t();let{noteId:_}=e,{isReference:g=!1}=e,v=ce.notes[_];const F={note:v,noteId:_,instanceId:d,Delete:f};let C,G=[],W=[],J=[];const k=_==0;let H=v.markup;ie(t,H,u=>n(6,a=u));let L=v.children;ie(t,L,u=>n(5,l=u));let U=!1;const lt=function(){n(3,U=!0)},Ue=async function(u){if(!(u<=0)){await De();var y=[...G,...W];y.forEach(T=>{T.Expand(),T.ExpandAll(u-1)})}};let _e=!1,{Focus:X=function(u=!1){if(c!=F&&be.set(null),re.set(F),k){u||oe.set([]);return}else Ie(F,u)}}=e;F.Focus=X;let Ie=function(u,y){let T=y?[...p,u]:[u];oe.set(T)},ct=function(u){let{child_to_swap:y,moveUp:T}=u.detail;var D=l.indexOf(y),I=D+(T?-1:1),S=I>=0&&I<l.length;if(S){let P=[...l];[P[D],P[I]]=[P[I],P[D]],L.set(P)}},ut=function(u){let{target:y,isFocused:T}=u.detail;if(T){var D=ge();let S=D.indexOf(y);if(S==1)X();else{var I=D[S-1];re.set(I),oe.set([I])}}n(10,J=J.filter(S=>S!=y.instanceId)),L.set([...l.filter(S=>S!=y.note.id)])};const ge=function(){var u=[F];if(U||k){var y=[...G,...W];y.forEach(T=>{if(T!=null){var D=[];D=T.getSortedGenespan(),u=u.concat(D)}})}return u};let He=function(u){if(_e){if(u.stopImmediatePropagation(),!s)switch(u.key){case"ArrowUp":u.shiftKey&&h("SwapChildren",{child_to_swap:v.id,moveUp:!0});break;case"ArrowDown":u.shiftKey&&h("SwapChildren",{child_to_swap:v.id,moveUp:!1});break;case"ArrowLeft":h("Focus",{keepSelection:u.ctrlKey});break;case"Insert":u.preventDefault();var y=ce.addNewChild({parent:v});n(3,U=!0),u.ctrlKey||De().then(()=>{ge().forEach(S=>{S.note==y&&(re.set(S),oe.set([S]))})});break;case"Tab":u.preventDefault(),n(3,U=!U),u.shiftKey&&Ue(2);break;case"Enter":k||(u.preventDefault(),be.set(F),De().then(()=>{C.focus(),Ie(F,!1),Ke()}));break;case"i":if(u.ctrlKey)debugger;break;case"c":u.ctrlKey&&(Ae.copiedInstances=[...p]);break;case"x":u.ctrlKey&&(Ae.copiedInstances=[...p]);break;case"v":u.ctrlKey&&(Ae.copiedInstances.forEach(function(I){var S=l.includes(I.noteId);S||(v.add(I.note),I.Delete())}),l.length>0&&n(3,U=!0));break;case"Alt":u.preventDefault();break}if(s)switch(u.key){case"Enter":break;case"Alt":u.preventDefault(),be.set(null);break;case"Tab":u.preventDefault();var T=C.selectionStart,D=C.selectionEnd;n(7,C.value=C.value.substring(0,T)+"	"+C.value.substring(D),C),n(7,C.selectionStart=n(7,C.selectionEnd=T+1,C),C)}}};Ne(()=>{window.addEventListener("keydown",He)}),St(()=>{window.removeEventListener("keydown",He)});function Ke(){var u=Math.max(Lt.MIN_TEXTBOX_HEIGHT,C.scrollHeight)+"px";n(7,C.style.height=u,C)}k&&(Ne(X),window.addEventListener("keydown",function(y){let T=function(D){for(var I=ge(),S,P=0;P<I.length;P++){var yt=I[P];if(yt==c){S=P;break}}var Ce=S+(D?-1:1),kt=Ce>=0&&Ce<I.length;return kt?I[Ce]:null};if((y.key=="ArrowUp"||y.key=="ArrowDown")&&r==null&&(y.preventDefault(),!y.shiftKey)){let D=y.key=="ArrowUp",I=T(D);I!=null&&(re.set(I),Ie(I,y.ctrlKey))}y.key=="Delete"&&p.forEach(D=>{D.Delete()})}));var Re=function(){document.title.endsWith("*")||(document.title=document.title+"*")};k&&Ne(()=>{document.title=Pt(document.title)});function Be(){h("CloseHelp")}function at(u,y){V[u?"unshift":"push"](()=>{G[y]=u,n(8,G)})}const ft=u=>{X(u.detail.keepSelection)},dt=u=>{X(u.ctrlKey),Be()},ht=()=>{n(3,U=!U)};function pt(u){V[u?"unshift":"push"](()=>{C=u,n(7,C)})}function _t(){a=this.value,H.set(a)}const gt=u=>{X(u.ctrlKey)};function mt(u,y){V[u?"unshift":"push"](()=>{G[y]=u,n(8,G)})}const bt=u=>{X(u.detail.keepSelection)};function vt(u,y){V[u?"unshift":"push"](()=>{W[y]=u,n(9,W)})}const wt=u=>{X(u.detail.keepSelection)};return t.$$set=u=>{"noteId"in u&&n(2,_=u.noteId),"isReference"in u&&n(0,g=u.isReference),"Focus"in u&&n(1,X=u.Focus)},t.$$.update=()=>{t.$$.dirty[0]&335544320&&n(12,s=r==F),t.$$.dirty[0]&24&&n(4,i=U||i),t.$$.dirty[0]&603979776&&n(11,_e=c===F),t.$$.dirty[0]&201326592&&n(13,o=p.includes(F)),t.$$.dirty[0]&64&&Re(),t.$$.dirty[0]&32&&Re()},[g,X,_,U,i,l,a,C,G,W,J,_e,s,o,v,k,H,L,ct,ut,Ke,Be,d,lt,Ue,ge,F,p,r,c,at,ft,dt,ht,pt,_t,gt,mt,bt,vt,wt]}class Ee extends ke{constructor(e){super(),ye(this,e,Gt,Bt,pe,{instanceId:22,noteId:2,isReference:0,Expand:23,ExpandAll:24,Focus:1,getSortedGenespan:25},null,[-1,-1])}get instanceId(){return this.$$.ctx[22]}get Expand(){return this.$$.ctx[23]}get ExpandAll(){return this.$$.ctx[24]}get getSortedGenespan(){return this.$$.ctx[25]}}function Xt(t){let e,n,s,i,o,l,a,p;return{c(){e=E("div"),n=E("button"),n.textContent="Download",s=R(),i=E("label"),i.textContent="Upload",o=R(),l=E("input"),b(n,"id","download_btn"),b(n,"class","file-button svelte-e1fw06"),b(i,"id","upload_btn"),b(i,"class","file-button svelte-e1fw06"),b(i,"for","file"),b(l,"id","file"),b(l,"type","file"),b(l,"accept",".tnp"),Nt(l,"display","none"),b(e,"id","MenuBar"),b(e,"class","svelte-e1fw06")},m(r,c){$(r,e,c),w(e,n),w(e,s),w(e,i),w(e,o),w(e,l),t[3](l),a||(p=[z(n,"click",function(){$e(t[0])&&t[0].apply(this,arguments)}),z(l,"change",t[2])],a=!0)},p(r,[c]){t=r},i:K,o:K,d(r){r&&A(e),t[3](null),a=!1,j(p)}}}function jt(t){return t.slice(0,-4)}function Ze(){document.title=Wt(document.title)}function Wt(t){return t.endsWith("*")?t.slice(0,-1):t}function zt(t,e,n){let s,i=async function(r){var c=B(ce.notes[0].children).length==0,h=s.files.length>0;if(h&&c){var f=jt(s.files[0].name);document.title=f}for(var d=0;d<s.files.length;d++){var _=s.files[d];await o(_)}n(1,s.value="",s),setTimeout(Ze,100)},o=async function(r){var c=await r.text(),h=new he;h.loadFromJSON(JSON.parse(c)),h.Update();var f=h.notes[0];f.markup.set(r.name),ce.Merge(h)},{download:l=function(){var r=ce.getCopyForDownload(),c=JSON.stringify(r),h=new Blob([c],{type:"application/octet-binary"});a(h),Ze()}}=e,a=function(r){var c=document.createElement("a");c.setAttribute("href",URL.createObjectURL(r)),c.setAttribute("download",document.title+".tnp"),c.click()};function p(r){V[r?"unshift":"push"](()=>{s=r,n(1,s)})}return t.$$set=r=>{"download"in r&&n(0,l=r.download)},[l,s,i,p]}class Jt extends ke{constructor(e){super(),ye(this,e,zt,Xt,pe,{download:0})}}function Vt(t,e,n){const s=t.slice();return s[0]=e[n][0],s[1]=e[n][1],s}function qt(t){let e,n,s,i,o,l,a;return{c(){e=E("tr"),n=E("td"),s=ne(t[0]),i=R(),o=E("td"),l=ne(t[1]),a=R(),b(n,"class","svelte-108dde0"),b(o,"class","svelte-108dde0")},m(p,r){$(p,e,r),w(e,n),w(n,s),w(e,i),w(e,o),w(o,l),w(e,a)},p:K,d(p){p&&A(e)}}}function Qt(t){let e,n,s,i,o,l,a,p=[["Insert","Add a new note under the focused one"],["Delete","Delete selected notes"],["Up/Down Arrow","Move focus up/down"],["Enter","Make a note editable"],["Alt","Return an editable note to being uneditable"],["Shift+Up/Down","Swap Adjacent Siblings"],["Click on note","Focuses note"],["Ctrl+Focus Note","Keeps notes selected while focusing new one"],["Ctrl+C/X/V","Copy/Cut/Paste selected notes"],["Tab","Toggles whether focused note is expanded"],["Tab+Shift","Also expands children and grandchildren"]],r=[];for(let c=0;c<11;c+=1)r[c]=qt(Vt(t,p,c));return{c(){e=E("div"),n=E("div"),n.innerHTML="<h2>Controls</h2>",s=R(),i=E("table"),o=E("thead"),o.innerHTML=`<tr><th class="svelte-108dde0">Command</th> 
            <th class="svelte-108dde0">Description</th></tr>`,l=R(),a=E("tbody");for(let c=0;c<11;c+=1)r[c].c();b(n,"class","title svelte-108dde0"),b(i,"class","svelte-108dde0"),b(e,"class","menu svelte-108dde0")},m(c,h){$(c,e,h),w(e,n),w(e,s),w(e,i),w(i,o),w(i,l),w(i,a);for(let f=0;f<11;f+=1)r[f]&&r[f].m(a,null)},p:K,i:K,o:K,d(c){c&&A(e),It(r,c)}}}class Yt extends ke{constructor(e){super(),ye(this,e,null,Qt,pe,{})}}function xe(t){let e,n,s;return n=new Yt({}),{c(){e=E("div"),se(n.$$.fragment),b(e,"id","helpWrapper"),b(e,"class","svelte-wm15kg")},m(i,o){$(i,e,o),Q(n,e,null),s=!0},i(i){s||(N(n.$$.fragment,i),s=!0)},o(i){M(n.$$.fragment,i),s=!1},d(i){i&&A(e),Y(n)}}}function Zt(t){let e,n,s,i,o,l,a=t[0]?"X":"?",p,r,c,h,f,d,_;i=new Jt({});let g=t[0]&&xe();return h=new Ee({props:{noteId:0}}),h.$on("CloseHelp",t[1]),{c(){e=E("main"),n=E("div"),s=E("span"),se(i.$$.fragment),o=R(),l=E("button"),p=ne(a),r=R(),g&&g.c(),c=R(),se(h.$$.fragment),b(s,"id","Menubar"),b(s,"class","svelte-wm15kg"),b(l,"class","svelte-wm15kg"),O(l,"close-btn",t[0]),b(n,"id","Topbar"),b(n,"class","svelte-wm15kg"),b(e,"data-testid","my-element"),b(e,"class","svelte-wm15kg")},m(m,v){$(m,e,v),w(e,n),w(n,s),Q(i,s,null),w(n,o),w(n,l),w(l,p),w(e,r),g&&g.m(e,null),w(e,c),Q(h,e,null),f=!0,d||(_=z(l,"click",t[2]),d=!0)},p(m,[v]){(!f||v&1)&&a!==(a=m[0]?"X":"?")&&st(p,a),(!f||v&1)&&O(l,"close-btn",m[0]),m[0]?g?v&1&&N(g,1):(g=xe(),g.c(),N(g,1),g.m(e,c)):g&&(ae(),M(g,1,1,()=>{g=null}),fe())},i(m){f||(N(i.$$.fragment,m),N(g),N(h.$$.fragment,m),f=!0)},o(m){M(i.$$.fragment,m),M(g),M(h.$$.fragment,m),f=!1},d(m){m&&A(e),Y(i),g&&g.d(),Y(h),d=!1,_()}}}function xt(t,e,n){let s=!1;return[s,function(){n(0,s=!1)},()=>n(0,s=!s)]}class en extends ke{constructor(e){super(),ye(this,e,xt,Zt,pe,{})}}new en({target:document.getElementById("app")});
